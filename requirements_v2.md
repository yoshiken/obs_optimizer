# OBS配信最適化ツール 要求・要件定義書 v2.0

---

## 1. 概要

本ツールは、配信者向けにOBSの画質・音質・ビットレートを自動で最適化し、現在の設定と比較・改善提案を行う常駐型デスクトップアプリケーションである。配信中のリアルタイム監視により、実負荷での問題検出と動的な最適化を実現する。

### 1.1 バージョン履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|----------|
| v1.0 | 2024-12 | 初版作成 |
| v2.0 | 2024-12 | 技術レビュー・UI/UXレビュー結果を統合 |

### 1.2 ドキュメントスコープ

- プロジェクト全体の要求・要件定義
- Phase 1a（MVP）からPhase 3（将来拡張）までのロードマップ
- UI/UX設計指針およびアクセシビリティ要件
- 技術スタック・アーキテクチャの詳細仕様

---

## 2. 解決する課題

| 課題カテゴリ | 課題 | 詳細 | 影響を受けるペルソナ |
|-------------|------|------|---------------------|
| 設定の複雑さ | パラメータ過多 | ビットレート、エンコーダー、解像度、音声設定の組み合わせが多すぎて最適解がわからない | 全ペルソナ |
| 環境依存性 | 個別最適化の困難さ | 回線速度・PCスペック・配信プラットフォームごとに最適値が異なる | 全ペルソナ |
| 検証コスト | テスト工数 | 設定変更のたびに配信テストが必要で、比較が困難 | ゲーム配信者、歌配信者 |
| 実負荷の未知 | 事前予測不能 | ゲーム+Live2D+OBS同時実行時の負荷は初期設定では観測できない | 初心者VTuber |
| 技術的障壁 | 専門用語の難解さ | ビットレート、エンコーダー、キーフレーム間隔などの概念理解が困難 | 初心者VTuber |

---

## 3. ターゲットユーザー

### 3.1 ペルソナ定義

#### ペルソナ1: 初心者VTuber「あかり」

| 属性 | 詳細 |
|------|------|
| 年齢 | 22歳 |
| 配信歴 | 3ヶ月 |
| 技術レベル | 低（OBSの基本操作のみ理解） |
| 使用機材 | ミドルスペックPC（RTX 3060、Ryzen 5） |
| 配信スタイル | 雑談配信、Live2Dアバター使用 |
| 主な課題 | 設定の意味がわからない、カクつきの原因がわからない |
| 目標 | 視聴者に快適な配信を届けたい |
| 技術用語への態度 | 避けたい、わかりやすい言葉で説明してほしい |

**ニーズ:**
- ワンクリックで最適設定を適用したい
- 問題があれば日本語で具体的に教えてほしい
- 専門用語は使わないでほしい

#### ペルソナ2: ゲーム配信者「タクヤ」

| 属性 | 詳細 |
|------|------|
| 年齢 | 28歳 |
| 配信歴 | 2年 |
| 技術レベル | 中（エンコーダー設定は理解、深い最適化は未経験） |
| 使用機材 | ハイスペックPC（RTX 4080、Core i7-13700K） |
| 配信スタイル | FPSゲーム配信（Apex、Valorant） |
| 主な課題 | ゲーム負荷と配信品質のバランス、フレームドロップ |
| 目標 | 144FPSでゲームしながら高品質配信 |
| 技術用語への態度 | ある程度理解できる、詳細データも見たい |

**ニーズ:**
- リアルタイムでパフォーマンスを監視したい
- ゲームごとに最適なプリセットを保存したい
- 問題発生時に原因を特定したい

#### ペルソナ3: 歌配信者「みさき」

| 属性 | 詳細 |
|------|------|
| 年齢 | 25歳 |
| 配信歴 | 1年 |
| 技術レベル | 低〜中（音声設定には詳しい、映像設定は苦手） |
| 使用機材 | ミドルスペックPC、オーディオインターフェース使用 |
| 配信スタイル | 歌枠、雑談 |
| 主な課題 | 音声と映像の品質バランス、音ズレ |
| 目標 | 高音質で歌を届けたい |
| 技術用語への態度 | 音声関連は理解、映像関連は苦手 |

**ニーズ:**
- 音声ビットレートを優先した設定
- 音ズレを検出・警告してほしい
- 歌枠用のプリセットがほしい

### 3.2 ユーザーストーリー

#### 初心者VTuber向け

| ID | ユーザーストーリー | 優先度 | Phase |
|----|-------------------|--------|-------|
| US-001 | 初心者として、ツールを起動したらすぐに何をすべきかわかるようにしたい | Must | 1a |
| US-002 | 初心者として、専門用語ではなくわかりやすい言葉で状態を知りたい | Must | 1a |
| US-003 | 初心者として、問題があればどう直せばいいか具体的に教えてほしい | Must | 1b |
| US-004 | 初心者として、ワンクリックで推奨設定を適用したい | Should | 2a |

#### ゲーム配信者向け

| ID | ユーザーストーリー | 優先度 | Phase |
|----|-------------------|--------|-------|
| US-011 | ゲーム配信者として、リアルタイムでGPU/CPU負荷を監視したい | Must | 1a |
| US-012 | ゲーム配信者として、フレームドロップの原因を特定したい | Must | 1b |
| US-013 | ゲーム配信者として、ゲームごとにプロファイルを保存したい | Should | 2a |
| US-014 | ゲーム配信者として、過去の配信と比較したい | Could | 2b |

#### 歌配信者向け

| ID | ユーザーストーリー | 優先度 | Phase |
|----|-------------------|--------|-------|
| US-021 | 歌配信者として、音声品質を優先した設定提案がほしい | Should | 1b |
| US-022 | 歌配信者として、音ズレを検出して警告してほしい | Should | 2a |
| US-023 | 歌配信者として、歌枠用のプリセットがほしい | Could | 2a |

---

## 4. 情報アーキテクチャ

### 4.1 画面構成

```
[メインウィンドウ]
├── [ダッシュボード] ← デフォルト表示
│   ├── グランスビュー（健康状態サマリー）
│   ├── 概要ビュー（主要メトリクス）
│   └── 詳細ビュー（全メトリクス・グラフ）
├── [診断]
│   ├── 初期診断
│   ├── 環境分析
│   └── 推奨設定
├── [履歴]
│   ├── セッション一覧
│   └── セッション詳細
├── [設定]
│   ├── 接続設定
│   ├── 通知設定
│   ├── 表示設定
│   └── プロファイル管理
└── [ヘルプ]
    ├── オンボーディング（再実行）
    ├── 用語集
    └── トラブルシューティング

[システムトレイ]
├── 状態インジケーター
├── クイックアクション
│   ├── ダッシュボード表示
│   ├── 配信中モード切替
│   └── 終了
└── ミニステータス表示
```

### 4.2 ナビゲーション設計

| ナビゲーション要素 | 説明 | アクセス方法 |
|-------------------|------|-------------|
| サイドバー | 主要機能へのアクセス | 常時表示（折りたたみ可能） |
| パンくずリスト | 現在位置の表示 | 詳細画面で表示 |
| クイックアクション | 頻繁な操作へのショートカット | ダッシュボード上部 |
| システムトレイ | 最小化時のアクセス | OSタスクバー |
| キーボードショートカット | 高速操作 | グローバル |

#### キーボードショートカット一覧

| ショートカット | 機能 |
|---------------|------|
| `Ctrl+D` | ダッシュボードを開く |
| `Ctrl+1/2/3` | 情報密度切り替え（グランス/概要/詳細） |
| `Ctrl+M` | 配信中モード切替 |
| `Ctrl+,` | 設定を開く |
| `Esc` | ダイアログを閉じる / 前の画面に戻る |
| `F1` | ヘルプを開く |

### 4.3 情報階層（3段階）

#### レベル1: グランスビュー（一目で把握）

**目的:** 1秒で配信の健康状態を把握

**表示要素:**
- 総合ステータスアイコン（緑/黄/赤）
- ステータステキスト（例:「配信は良好です」「注意が必要です」）
- 最も重要な1つの警告（ある場合）

```
┌─────────────────────────────────┐
│  ● 配信は良好です              │
│    問題は検出されていません     │
└─────────────────────────────────┘
```

#### レベル2: 概要ビュー（主要情報）

**目的:** 10秒で主要なパフォーマンス指標を確認

**表示要素:**
- 4つの主要メトリクス（カード形式）
- 直近の警告リスト（最大3件）
- 配信時間

```
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│ 画質    │ │ 安定性  │ │ PC負荷  │ │ 回線   │
│  高     │ │ 99.8%   │ │ 中程度  │ │ 良好   │
└─────────┘ └─────────┘ └─────────┘ └─────────┘
```

#### レベル3: 詳細ビュー（技術者向け）

**目的:** 問題の詳細分析、設定調整

**表示要素:**
- 全メトリクスのリアルタイム数値
- 時系列グラフ（選択可能）
- エンコーダー詳細
- ネットワーク詳細
- ログビューア

---

## 5. ユーザーフロー

### 5.1 初回セットアップフロー

```
[インストール完了]
       ↓
[ツール初回起動]
       ↓
┌─────────────────────────────────────────┐
│ Step 1: ようこそ                         │
│                                         │
│ 「OBS配信最適化ツールへようこそ！         │
│  このツールはあなたの配信を               │
│  より快適にするお手伝いをします」          │
│                                         │
│ [はじめる] [スキップ]                     │
└─────────────────────────────────────────┘
       ↓
┌─────────────────────────────────────────┐
│ Step 2: OBSとの接続                      │
│                                         │
│ OBSのWebSocket設定を有効にしてください    │
│                                         │
│ [自動設定ガイドを表示]                    │
│                                         │
│ ホスト: [localhost    ]                  │
│ ポート: [4455         ]                  │
│ パスワード: [********  ]                 │
│                                         │
│ [接続テスト] [次へ]                       │
└─────────────────────────────────────────┘
       ↓
┌─────────────────────────────────────────┐
│ Step 3: あなたの配信スタイル              │
│                                         │
│ どんな配信をすることが多いですか？         │
│                                         │
│ [○] 雑談・トーク配信                     │
│ [○] ゲーム配信                           │
│ [○] 歌・音楽配信                         │
│ [○] 制作・お絵描き配信                    │
│                                         │
│ [戻る] [次へ]                            │
└─────────────────────────────────────────┘
       ↓
┌─────────────────────────────────────────┐
│ Step 4: 配信プラットフォーム              │
│                                         │
│ 主に使用するプラットフォームを選択         │
│                                         │
│ [○] YouTube Live                        │
│ [○] Twitch                              │
│ [○] ニコニコ生放送                       │
│ [○] その他                               │
│                                         │
│ [戻る] [次へ]                            │
└─────────────────────────────────────────┘
       ↓
┌─────────────────────────────────────────┐
│ Step 5: 環境分析中...                    │
│                                         │
│ [====●============] 35%                 │
│                                         │
│ ✓ PCスペックを確認しました               │
│ ✓ GPUを検出しました (NVIDIA RTX 3060)    │
│ → 回線速度を測定中...                    │
│ ○ OBS設定を読み取り中...                 │
│                                         │
│ [キャンセル]                             │
└─────────────────────────────────────────┘
       ↓
┌─────────────────────────────────────────┐
│ Step 6: セットアップ完了！                │
│                                         │
│ あなたの環境に最適な設定を見つけました     │
│                                         │
│ 現在の設定:                              │
│   画質レベル: 中 → 推奨: 高              │
│   安定性設定: 標準 → 推奨: 高速          │
│                                         │
│ [推奨設定を見る] [ダッシュボードへ]        │
└─────────────────────────────────────────┘
```

### 5.2 配信中フロー

```
[ユーザーがOBSで配信開始]
       ↓
[ツールが自動検出]
       ↓
┌─────────────────────────────────────────┐
│ 配信を検出しました                        │
│                                         │
│ 配信中モードに切り替えますか？            │
│                                         │
│ ・通知を控えめにします                    │
│ ・重要な警告のみ表示します                │
│ ・自動修正を有効にします（任意）          │
│                                         │
│ [有効にする] [今回はスキップ] [設定...]    │
│                                         │
│ □ 次回から自動で有効にする                │
└─────────────────────────────────────────┘
       ↓
[配信中モードで監視開始]
       ↓
(問題検出時)
       ↓
┌─────────────────────────────────────────┐
│ ⚠ 画質が低下しています                   │
│                                         │
│ 回線が混雑しているようです                │
│                                         │
│ [自動調整する] [無視] [詳細を見る]         │
└─────────────────────────────────────────┘
       ↓
[配信終了検出]
       ↓
┌─────────────────────────────────────────┐
│ 配信お疲れさまでした！                    │
│                                         │
│ 配信時間: 2時間15分                       │
│ 総合評価: 良好                           │
│                                         │
│ 気になる点:                              │
│ ・14:32頃に軽微なフレームドロップ         │
│                                         │
│ [レポートを見る] [閉じる]                 │
└─────────────────────────────────────────┘
```

### 5.3 配信後フロー

```
[セッションレポート表示]
       ↓
┌─────────────────────────────────────────┐
│ 配信レポート - 2024/12/20 20:00          │
│                                         │
│ ■ サマリー                               │
│   配信時間: 2時間15分                     │
│   平均画質: 高                           │
│   安定性: 99.2%                          │
│   問題発生: 2回                          │
│                                         │
│ ■ タイムライン                           │
│   [================▼===●====]           │
│   20:00        21:00    22:00  22:15    │
│                 ↑問題発生                │
│                                         │
│ ■ 改善提案                               │
│   ・ピーク時の負荷軽減のため...          │
│                                         │
│ [詳細分析] [設定を調整] [閉じる]          │
└─────────────────────────────────────────┘
```

---

## 6. 機能要件

### 6.1 Phase 1a: プロトタイプ（MVP最小構成）

**目標:** 基本的な接続と監視機能の実証

#### 6.1.1 OBS接続機能

| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-101 | WebSocket接続 | obws v0.14.0経由でOBSに接続 | Must |
| F-102 | 接続状態表示 | 接続/切断/再接続中の状態表示 | Must |
| F-103 | 自動再接続 | 切断時の自動再接続（指数バックオフ） | Must |
| F-104 | 認証処理 | パスワード認証対応 | Must |

**再接続ロジック仕様:**
```
初回接続失敗: 即座に再試行
1回目再試行: 1秒後
2回目再試行: 2秒後
3回目再試行: 4秒後
4回目再試行: 8秒後
5回目以降: 30秒間隔で継続
最大試行: 無制限（手動停止まで）
```

#### 6.1.2 基本メトリクス取得

| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-111 | OBSメトリクス取得 | CPU使用率、FPS、レンダリング時間取得 | Must |
| F-112 | フレームドロップ監視 | renderSkipped/outputSkipped取得 | Must |
| F-113 | ビットレート計算 | outputBytesの差分からビットレート算出 | Must |
| F-114 | システムメトリクス | sysinfo経由でCPU/メモリ取得 | Must |
| F-115 | GPU監視（NVIDIA） | NVML経由でGPU使用率/VRAM取得 | Must |

**ビットレート計算仕様:**
```rust
// outputBytesは累積値のため、差分計算が必要
let current_bytes = stats.output_bytes;
let elapsed_seconds = (current_time - last_sample_time).as_secs_f64();
let bitrate_bps = ((current_bytes - last_bytes) as f64 * 8.0) / elapsed_seconds;
let bitrate_kbps = bitrate_bps / 1000.0;
```

#### 6.1.3 最小UI

| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-121 | 接続設定画面 | ホスト/ポート/パスワード入力 | Must |
| F-122 | シンプルダッシュボード | 主要メトリクスのリアルタイム表示 | Must |
| F-123 | システムトレイ常駐 | 最小化時のトレイアイコン表示 | Must |
| F-124 | ウィンドウ非表示起動 | トレイのみで起動オプション | Should |

### 6.2 Phase 1b: MVP拡張

**目標:** ユーザーに価値を提供する診断・分析機能

#### 6.2.1 初期診断

| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-201 | OBS設定読み取り | 現在の映像/音声/出力設定を自動取得 | Must |
| F-202 | 回線速度測定 | アップロード速度の簡易測定 | Must |
| F-203 | ハードウェア検出 | CPU/GPU/メモリ情報の取得 | Must |
| F-204 | エンコーダー確認 | 利用可能なエンコーダーの検出 | Must |
| F-205 | 推奨設定算出 | プラットフォーム別の推奨値計算 | Must |
| F-206 | 比較レポート | 現在vs推奨の差分可視化 | Must |

#### 6.2.2 アラート・通知

| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-211 | 閾値アラート | CPU/GPU/フレームドロップの閾値超過通知 | Must |
| F-212 | 通知レベル設定 | Critical/Warning/Info/Tipsの4段階 | Must |
| F-213 | トースト通知 | OSネイティブ通知との連携 | Must |
| F-214 | アプリ内通知 | アプリ内通知履歴 | Should |

#### 6.2.3 データ永続化

| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-221 | 設定保存 | ユーザー設定のJSON保存 | Must |
| F-222 | セッションログ | 配信セッションのメトリクスログ保存 | Must |
| F-223 | SQLite統合 | rusqlite経由での時系列データ保存 | Should |

#### 6.2.4 オンボーディング

| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-231 | ウェルカムウィザード | 6ステップのセットアップガイド | Must |
| F-232 | 接続ガイド | OBS WebSocket設定の視覚的ガイド | Must |
| F-233 | 配信スタイル選択 | ペルソナに応じた初期設定 | Should |
| F-234 | スキップオプション | 経験者向けのスキップ機能 | Should |
| F-235 | 初回自動最適化 | 診断完了後、確認を経て推奨設定を一括適用 | Should |

### 6.3 Phase 2a: 自動化

**目標:** 設定の自動適用と配信中の自動調整

| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-301 | ワンクリック適用 | 推奨設定をOBSに直接反映 | Must |
| F-302 | プロファイル管理 | 用途別プリセットの保存/切替 | Must |
| F-303 | 配信中モード | 通知抑制・自動修正許可モード | Must |
| F-304 | 自動ビットレート調整 | ネットワーク状況に応じた動的調整 | Should |
| F-305 | 競合プロセス検出 | Discord、VTube Studio等の負荷検出 | Should |
| F-306 | AMD GPU対応 | ADLサポート追加 | Could |

### 6.4 Phase 2b: 高度な分析

**目標:** 詳細な分析とレポート機能

| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-401 | 問題箇所特定 | タイムスタンプ付きの問題記録 | Must |
| F-402 | 原因分析 | ドロップ原因の推定（エンコード/ネットワーク/レンダリング） | Must |
| F-403 | 改善提案 | 問題に基づく設定変更推奨 | Must |
| F-404 | 履歴比較 | 過去セッションとのパフォーマンス比較 | Should |
| F-405 | エクスポート | レポートのPDF/CSV出力 | Could |

### 6.5 Phase 3: 将来拡張

| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-501 | macOS対応 | macOS版の開発 | Should |
| F-502 | マルチ配信対応 | 複数プラットフォーム同時配信最適化 | Could |
| F-503 | クラウドバックアップ | 設定のクラウド同期 | Could |
| F-504 | VTuber特化機能 | Live2D負荷の専用監視 | Could |
| F-505 | コミュニティプリセット | プリセットの共有機能 | Could |

---

## 7. UI/UX要件

### 7.1 オンボーディング設計

#### 7.1.1 7ステップ構成

| ステップ | 目的 | 所要時間 | スキップ可否 |
|---------|------|---------|-------------|
| 1. ようこそ | ツールの価値説明 | 10秒 | 可 |
| 2. OBS接続 | WebSocket設定 | 30-60秒 | 不可 |
| 3. 配信スタイル | ペルソナ特定 | 15秒 | 可 |
| 4. プラットフォーム | 推奨値決定 | 10秒 | 可 |
| 5. 環境分析 | 自動スキャン | 30-60秒 | 不可 |
| 6. 自動最適化 | 推奨設定の一括適用 | 5-10秒 | 可 |
| 7. 完了 | 結果サマリー | 15秒 | - |

#### 7.1.2 接続ガイド詳細

```
┌─────────────────────────────────────────────────────┐
│ OBSのWebSocket設定を有効にしましょう                  │
│                                                     │
│ ┌─────────────────────────────────────────────────┐ │
│ │ [OBS画面のスクリーンショット]                     │ │
│ │                                                 │ │
│ │    ツール → obs-websocket設定                   │ │
│ │         ↓                                       │ │
│ │    [WebSocketサーバーを有効にする] ✓             │ │
│ └─────────────────────────────────────────────────┘ │
│                                                     │
│ 1. OBSを開いてください                               │
│ 2. メニューから「ツール」→「obs-websocket設定」       │
│ 3. 「WebSocketサーバーを有効にする」にチェック         │
│ 4. パスワードを設定（任意）                          │
│                                                     │
│ [OBSを開く] [接続をテスト]                           │
└─────────────────────────────────────────────────────┘
```

#### 7.1.3 自動最適化ステップ詳細

```
┌─────────────────────────────────────────────────────┐
│ 推奨設定を自動で適用しますか？            ステップ 6/7 │
├─────────────────────────────────────────────────────┤
│                                                     │
│  環境分析の結果、以下の設定変更を推奨します：         │
│                                                     │
│  ┌─────────────────────────────────────────────────┐ │
│  │ 変更項目              現在値    →    推奨値     │ │
│  ├─────────────────────────────────────────────────┤ │
│  │ ☑ ビットレート        3000kbps  →   6000kbps   │ │
│  │ ☑ エンコーダー        x264      →   NVENC      │ │
│  │ ☑ プリセット          veryfast  →   quality    │ │
│  │ ☑ キーフレーム間隔    0秒       →   2秒        │ │
│  │ ☐ 解像度              1080p     →   1080p (変更なし) │ │
│  └─────────────────────────────────────────────────┘ │
│                                                     │
│  ⚡ 推定改善効果: 品質スコア 65点 → 92点 (+27点)     │
│                                                     │
│  ℹ️ 変更はいつでも元に戻せます                       │
│                                                     │
│  [すべて適用する]  [選択した項目のみ適用]  [スキップ]  │
└─────────────────────────────────────────────────────┘
```

**自動最適化の安全設計:**

| 項目 | 仕様 |
|------|------|
| バックアップ | 適用前に現在の設定を自動保存 |
| ロールバック | ワンクリックで適用前の状態に復元可能 |
| 適用確認 | 各項目を個別に選択/解除可能 |
| 適用範囲 | 映像・音声・出力設定のみ（シーン・ソースは変更しない） |
| 除外項目 | カスタムスクリプト、ホットキー設定は対象外 |

### 7.2 ダッシュボード設計指針

#### 7.2.1 レイアウト原則

| 原則 | 説明 |
|------|------|
| F字型スキャン | 重要情報は左上に配置 |
| 視覚的階層 | サイズ・色・位置で重要度を表現 |
| 余白の活用 | 認知負荷軽減のための適切な余白 |
| 一貫性 | 統一されたカードサイズ・間隔 |

#### 7.2.2 色彩設計

| 状態 | 色 | 用途 |
|------|-----|------|
| 正常 | #22C55E (緑) | 健全な状態の表示 |
| 注意 | #F59E0B (黄) | 軽微な問題・警告 |
| 警告 | #EF4444 (赤) | 重大な問題 |
| 情報 | #3B82F6 (青) | 中立的な情報 |
| 無効/不明 | #6B7280 (灰) | 無効化された要素 |

#### 7.2.3 ダークモード対応

| 要素 | ライトモード | ダークモード |
|------|------------|------------|
| 背景 | #FFFFFF | #1F2937 |
| カード背景 | #F9FAFB | #374151 |
| テキスト（主） | #111827 | #F9FAFB |
| テキスト（副） | #6B7280 | #9CA3AF |
| ボーダー | #E5E7EB | #4B5563 |

### 7.3 通知・アラート戦略

#### 7.3.1 4段階通知レベル

| レベル | 名称 | 用途 | 表示方法 | 配信中モード |
|--------|------|------|---------|-------------|
| Critical | 緊急 | 配信停止リスクのある問題 | フルスクリーンモーダル | 表示する |
| Warning | 警告 | 品質低下を招く問題 | トースト通知（持続） | 表示する |
| Info | 情報 | 状態変化の通知 | トースト通知（自動消去） | 抑制する |
| Tips | ヒント | 改善提案・学習コンテンツ | アプリ内バナー | 抑制する |

#### 7.3.2 通知文言ガイドライン

| 悪い例 | 良い例 |
|--------|--------|
| CPU使用率が95%を超えました | パソコンが頑張りすぎています。配信が重くなるかも |
| outputSkippedFramesが発生 | 映像が少しカクついています |
| ビットレートが低下しました | 画質が下がっています。回線が混雑しているかも |

#### 7.3.3 通知の具体的条件

| 条件 | レベル | メッセージ |
|------|--------|----------|
| GPU使用率 > 95% 継続5秒 | Critical | 映像処理が限界です。ゲームか配信の設定を下げてください |
| CPU使用率 > 90% 継続10秒 | Warning | パソコンに負担がかかっています |
| フレームドロップ > 1% | Warning | 映像が少しカクついています |
| ビットレート < 設定の50% | Warning | 画質が下がっています |
| 配信開始検出 | Info | 配信が始まりました。監視を開始します |
| 回線速度 > 推奨値 | Tips | より高画質な設定も使えそうです |

### 7.4 配信中モード

#### 7.4.1 モード特性

| 設定項目 | 通常モード | 配信中モード |
|---------|----------|-------------|
| 通知頻度 | すべて表示 | Critical/Warningのみ |
| 通知音 | あり | なし（または最小音量） |
| 自動修正 | 確認後 | 即座に適用（許可時） |
| UI更新頻度 | 1秒 | 2秒（負荷軽減） |
| ウィンドウ動作 | 通常 | 常に背面（ゲーム優先） |

#### 7.4.2 自動修正の範囲

| 修正項目 | 自動修正可否 | 理由 |
|---------|-------------|------|
| ビットレート低下 | 可 | 可逆的、即座に回復可能 |
| エンコーダー変更 | 不可 | 配信中断リスク |
| 解像度変更 | 不可 | 視聴者に影響大 |
| オーディオ設定 | 不可 | 音声トラブルリスク |

### 7.5 用語翻訳表

#### 7.5.1 技術用語→ユーザー用語

| 技術用語 | ユーザー向け表現 | 説明補足 |
|---------|----------------|---------|
| ビットレート | 画質レベル | 高いほど綺麗だけど回線を使う |
| エンコーダー | 変換方式 | 映像を配信用に変換する方法 |
| キーフレーム間隔 | 画質の更新頻度 | 短いほど動きに強い |
| フレームドロップ | カクつき | 映像が飛んでしまうこと |
| renderSkippedFrames | 描画遅れ | パソコンが追いつかない |
| outputSkippedFrames | 送信遅れ | 回線が追いつかない |
| NVENC | GPU変換 | グラボを使った高速変換 |
| x264 | CPU変換 | CPUを使った高画質変換 |
| CBR | 固定画質 | 安定した画質を維持 |
| VBR | 動的画質 | 動きに合わせて画質調整 |

#### 7.5.2 表示レベル別用語使用

| 表示レベル | 用語使用 |
|----------|---------|
| グランスビュー | ユーザー用語のみ |
| 概要ビュー | ユーザー用語（技術用語は括弧内） |
| 詳細ビュー | 技術用語（ホバーでユーザー用語説明） |

---

## 8. アクセシビリティ要件

### 8.1 WCAG準拠レベル

**目標:** WCAG 2.1 Level AA準拠

| 原則 | 要件 | 実装方法 |
|------|------|---------|
| 知覚可能 | コントラスト比4.5:1以上 | 色彩設計で担保 |
| 知覚可能 | テキスト以外の情報代替 | アイコン+テキストラベル |
| 操作可能 | キーボード操作対応 | 全機能キーボードアクセス |
| 操作可能 | 十分な時間 | タイムアウトなし or 延長可能 |
| 理解可能 | 予測可能な操作 | 一貫したナビゲーション |
| 理解可能 | 入力支援 | エラー説明と修正方法 |
| 堅牢 | 支援技術対応 | セマンティックHTML |

### 8.2 キーボード操作

#### 8.2.1 フォーカス管理

| 要件 | 実装 |
|------|------|
| フォーカス可視性 | 2px以上のフォーカスリング |
| フォーカス順序 | 論理的なTab順序 |
| フォーカストラップ | モーダル内でのフォーカス閉じ込め |
| スキップリンク | コンテンツへの直接ジャンプ |

#### 8.2.2 ショートカット設計

| カテゴリ | ショートカット | 機能 |
|---------|--------------|------|
| ナビゲーション | `Ctrl+D` | ダッシュボード |
| ナビゲーション | `Ctrl+Shift+S` | 設定 |
| ビュー切替 | `Ctrl+1` | グランスビュー |
| ビュー切替 | `Ctrl+2` | 概要ビュー |
| ビュー切替 | `Ctrl+3` | 詳細ビュー |
| 操作 | `Ctrl+M` | 配信中モード切替 |
| 操作 | `Ctrl+R` | メトリクス更新 |
| ヘルプ | `F1` | ヘルプを開く |
| 閉じる | `Esc` | モーダル/ダイアログを閉じる |

### 8.3 スクリーンリーダー対応

#### 8.3.1 ARIA実装

| 要素 | ARIA属性 | 用途 |
|------|----------|------|
| メトリクスカード | `role="status"` `aria-live="polite"` | 値の変化を通知 |
| アラート | `role="alert"` `aria-live="assertive"` | 重要な通知を即座に読み上げ |
| ナビゲーション | `role="navigation"` `aria-label` | ナビゲーション領域の識別 |
| グラフ | `role="img"` `aria-label` | グラフ内容のテキスト説明 |
| 進捗バー | `role="progressbar"` `aria-valuenow` | 現在の進捗状況 |

#### 8.3.2 読み上げテキスト例

| 画面要素 | 読み上げテキスト |
|---------|----------------|
| 健康状態カード | 「配信状態: 良好。問題は検出されていません」 |
| GPU使用率90% | 「GPU使用率90パーセント。注意レベル」 |
| 警告通知 | 「警告: 映像が少しカクついています」 |

### 8.4 視覚的配慮

#### 8.4.1 色覚多様性対応

| 対応 | 実装方法 |
|------|---------|
| 色だけに依存しない | アイコン・パターン・テキストを併用 |
| コントラスト確保 | 隣接色の明度差を十分に確保 |
| カラーパレット検証 | 各種色覚シミュレーターでテスト |

**ステータス表示の例:**
```
通常表示:
  ● 正常 (緑色 + チェックアイコン + "正常"テキスト)
  ▲ 注意 (黄色 + 警告アイコン + "注意"テキスト)
  ■ 警告 (赤色 + エラーアイコン + "警告"テキスト)

色覚対応時も形状とテキストで識別可能
```

#### 8.4.2 モーション配慮

| 要件 | 実装 |
|------|------|
| アニメーション抑制 | `prefers-reduced-motion` 対応 |
| 自動再生なし | グラフのアニメーションは手動トリガー |
| 点滅制限 | 3回/秒を超える点滅なし |

#### 8.4.3 テキストサイズ

| 要素 | 最小サイズ | 推奨サイズ |
|------|----------|----------|
| 本文 | 14px | 16px |
| ラベル | 12px | 14px |
| 見出し | 18px | 24px |
| メトリクス値 | 24px | 32px |

**ズーム対応:**
- 200%ズームまでレイアウト崩れなし
- 相対単位（rem/em）使用

---

## 9. 非機能要件

### 9.1 パフォーマンス要件

| 項目 | 要件 | 測定条件 |
|------|------|---------|
| CPU使用率（UI非表示時） | 1%未満 | システムトレイのみで常駐時 |
| CPU使用率（UI表示時） | 3%未満 | ダッシュボード表示・更新時 |
| メモリ使用量 | 150MB未満 | Tauri+WebView=60-120MB想定 |
| 起動時間 | 3秒以内 | コールドスタート時 |
| UI応答時間 | 100ms以内 | ユーザー操作への反応 |
| メトリクス更新間隔 | 1秒 | 通常時 |
| メトリクス更新間隔 | 2秒 | 配信中モード時 |

### 9.2 信頼性要件

| 項目 | 要件 |
|------|------|
| 稼働率 | 99.9%（ツール自体のクラッシュ率） |
| データ損失防止 | 設定・ログの自動バックアップ |
| 障害分離 | ツールクラッシュ時にOBSを巻き込まない |
| 自動復旧 | 接続切断時の自動再接続 |

### 9.3 セキュリティ要件

| 項目 | 要件 |
|------|------|
| データ保存 | ローカル完結（クラウド送信なし） |
| パスワード保存 | OS資格情報ストアまたは暗号化保存 |
| 外部通信 | obs-websocket接続のみ（localhost推奨） |
| アップデート | 署名付きバイナリ配布 |

### 9.4 互換性要件

| 項目 | 要件 |
|------|------|
| 対応OS | Windows 10 (1903以降)、Windows 11 |
| OBSバージョン | OBS Studio 28.0以降（obs-websocket 5.x内蔵） |
| obs-websocket | Protocol version 5.0以上 |
| 画面解像度 | 1280x720以上、4K対応 |
| DPI | 100%-200%スケーリング対応 |

### 9.5 保守性要件

| 項目 | 要件 |
|------|------|
| ログ出力 | 構造化ログ（JSON形式） |
| エラーレポート | オプトインでのクラッシュレポート |
| 設定エクスポート | JSON形式でのエクスポート/インポート |
| アップデート | 自動更新チェック（手動適用） |

---

## 10. 技術要件

### 10.1 アーキテクチャ

```
┌─────────────────────────────────────────────────────────────┐
│                    OBS配信最適化ツール                        │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐│
│  │                   Presentation Layer                    ││
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ││
│  │  │    WebView   │  │  System Tray │  │   Toasts     │  ││
│  │  │  (React/TS)  │  │   (Native)   │  │  (Native)    │  ││
│  │  └──────────────┘  └──────────────┘  └──────────────┘  ││
│  └─────────────────────────────────────────────────────────┘│
│                              ↕ IPC (Tauri Commands)          │
│  ┌─────────────────────────────────────────────────────────┐│
│  │                   Application Layer                      ││
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ││
│  │  │  Monitoring  │  │  Diagnostics │  │   Profiles   │  ││
│  │  │   Service    │  │   Service    │  │   Service    │  ││
│  │  └──────────────┘  └──────────────┘  └──────────────┘  ││
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ││
│  │  │    Alert     │  │   Settings   │  │   Session    │  ││
│  │  │   Manager    │  │   Manager    │  │   Manager    │  ││
│  │  └──────────────┘  └──────────────┘  └──────────────┘  ││
│  └─────────────────────────────────────────────────────────┘│
│                              ↕                               │
│  ┌─────────────────────────────────────────────────────────┐│
│  │                  Infrastructure Layer                    ││
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ││
│  │  │     obws     │  │   sysinfo    │  │    NVML      │  ││
│  │  │  (OBS API)   │  │  (System)    │  │   (GPU)      │  ││
│  │  └──────────────┘  └──────────────┘  └──────────────┘  ││
│  │  ┌──────────────┐  ┌──────────────┐                    ││
│  │  │   rusqlite   │  │  serde_json  │                    ││
│  │  │   (Storage)  │  │  (Config)    │                    ││
│  │  └──────────────┘  └──────────────┘                    ││
│  └─────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────┘
         ↕ WebSocket                    ↕ Native API
┌──────────────────┐          ┌────────────────────────┐
│    OBS Studio    │          │    Operating System    │
│  (obs-websocket) │          │   (Windows/macOS)      │
└──────────────────┘          └────────────────────────┘
```

### 10.2 技術スタック

| レイヤー | コンポーネント | 技術 | バージョン |
|---------|--------------|------|----------|
| フレームワーク | デスクトップ | Tauri | v2.x |
| フロントエンド | UI | React | 18.x |
| フロントエンド | 言語 | TypeScript | 5.x |
| フロントエンド | スタイル | Tailwind CSS | 3.x |
| フロントエンド | 状態管理 | Zustand | 4.x |
| バックエンド | 言語 | Rust | 1.75+ |
| バックエンド | 非同期ランタイム | Tokio | 1.x |
| OBS連携 | WebSocket | obws | 0.14.0 |
| システム監視 | CPU/メモリ | sysinfo | 0.30+ |
| GPU監視 | NVIDIA | nvml-wrapper | 0.9+ |
| データ永続化 | 時系列データ | rusqlite | 0.31+ |
| データ永続化 | 設定 | serde_json | 1.x |
| エラーハンドリング | エラー型 | thiserror | 1.x |
| エラーハンドリング | エラー報告 | anyhow | 1.x |
| ログ | 構造化ログ | tracing | 0.1+ |

### 10.3 obs-websocket連携仕様

#### 10.3.1 接続管理

```rust
use obws::Client;

pub struct ObsConnection {
    client: Option<Client>,
    host: String,
    port: u16,
    password: Option<String>,
    reconnect_attempts: u32,
    max_reconnect_delay: Duration,
}

impl ObsConnection {
    pub async fn connect(&mut self) -> Result<(), ObsError> {
        let client = Client::connect(
            &self.host,
            self.port,
            self.password.as_deref()
        ).await?;

        self.client = Some(client);
        self.reconnect_attempts = 0;
        Ok(())
    }

    pub async fn reconnect_with_backoff(&mut self) -> Result<(), ObsError> {
        let delays = [1, 2, 4, 8, 30]; // 秒

        loop {
            let delay_idx = self.reconnect_attempts.min(4) as usize;
            let delay = Duration::from_secs(delays[delay_idx]);

            tokio::time::sleep(delay).await;

            match self.connect().await {
                Ok(()) => return Ok(()),
                Err(e) => {
                    self.reconnect_attempts += 1;
                    tracing::warn!(
                        "Reconnection attempt {} failed: {}",
                        self.reconnect_attempts,
                        e
                    );
                }
            }
        }
    }
}
```

#### 10.3.2 メトリクス取得

```rust
pub struct ObsMetrics {
    pub cpu_usage: f64,
    pub memory_usage: f64,
    pub active_fps: f64,
    pub average_frame_render_time: f64,
    pub render_skipped_frames: u64,
    pub output_skipped_frames: u64,
    pub output_bytes: u64,
    pub timestamp: DateTime<Utc>,
}

pub struct BitrateCalculator {
    last_bytes: u64,
    last_timestamp: Instant,
}

impl BitrateCalculator {
    pub fn calculate(&mut self, current_bytes: u64) -> f64 {
        let now = Instant::now();
        let elapsed = now.duration_since(self.last_timestamp).as_secs_f64();

        if elapsed < 0.1 {
            return 0.0; // サンプリング間隔が短すぎる
        }

        let byte_diff = current_bytes.saturating_sub(self.last_bytes);
        let bitrate_kbps = (byte_diff as f64 * 8.0) / elapsed / 1000.0;

        self.last_bytes = current_bytes;
        self.last_timestamp = now;

        bitrate_kbps
    }
}
```

#### 10.3.3 エラーハンドリング

```rust
use thiserror::Error;

#[derive(Error, Debug)]
pub enum ObsError {
    #[error("接続に失敗しました: {0}")]
    ConnectionFailed(String),

    #[error("認証に失敗しました。パスワードを確認してください")]
    AuthenticationFailed,

    #[error("OBSとの接続が切断されました")]
    Disconnected,

    #[error("OBSからの応答がありません（タイムアウト）")]
    Timeout,

    #[error("OBSのバージョンが古いです（{required}以上が必要、現在{current}）")]
    VersionMismatch {
        required: String,
        current: String,
    },

    #[error("不明なエラー: {0}")]
    Unknown(#[from] anyhow::Error),
}

impl ObsError {
    pub fn user_message(&self) -> &str {
        match self {
            Self::ConnectionFailed(_) =>
                "OBSに接続できませんでした。OBSが起動しているか確認してください",
            Self::AuthenticationFailed =>
                "パスワードが違うようです。OBSのWebSocket設定を確認してください",
            Self::Disconnected =>
                "OBSとの接続が切れました。自動で再接続を試みています",
            Self::Timeout =>
                "OBSからの応答がありません。OBSが固まっていないか確認してください",
            Self::VersionMismatch { .. } =>
                "OBSのバージョンが古いです。最新版にアップデートしてください",
            Self::Unknown(_) =>
                "予期しないエラーが発生しました",
        }
    }
}
```

### 10.4 データ永続化

#### 10.4.1 ストレージ戦略

| データ種別 | 形式 | 保存場所 | 保持期間 |
|----------|------|---------|---------|
| ユーザー設定 | JSON | `%APPDATA%/obs-optimizer/config.json` | 永続 |
| プロファイル | JSON | `%APPDATA%/obs-optimizer/profiles/` | 永続 |
| セッションログ | SQLite | `%APPDATA%/obs-optimizer/sessions.db` | 30日 |
| メトリクス時系列 | SQLite | `%APPDATA%/obs-optimizer/sessions.db` | 30日 |
| アプリケーションログ | テキスト | `%APPDATA%/obs-optimizer/logs/` | 7日 |

#### 10.4.2 SQLiteスキーマ

```sql
-- セッションテーブル
CREATE TABLE sessions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    started_at DATETIME NOT NULL,
    ended_at DATETIME,
    platform TEXT,
    total_frames INTEGER DEFAULT 0,
    dropped_frames INTEGER DEFAULT 0,
    avg_bitrate_kbps REAL,
    avg_cpu_usage REAL,
    avg_gpu_usage REAL,
    notes TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- メトリクス時系列テーブル
CREATE TABLE metrics (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id INTEGER NOT NULL,
    timestamp DATETIME NOT NULL,
    cpu_usage REAL,
    gpu_usage REAL,
    memory_usage REAL,
    vram_usage REAL,
    fps REAL,
    bitrate_kbps REAL,
    render_skipped INTEGER,
    output_skipped INTEGER,
    FOREIGN KEY (session_id) REFERENCES sessions(id) ON DELETE CASCADE
);

-- イベントテーブル（問題検出など）
CREATE TABLE events (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id INTEGER NOT NULL,
    timestamp DATETIME NOT NULL,
    event_type TEXT NOT NULL,
    severity TEXT NOT NULL,
    message TEXT,
    details TEXT,
    FOREIGN KEY (session_id) REFERENCES sessions(id) ON DELETE CASCADE
);

-- インデックス
CREATE INDEX idx_metrics_session_timestamp ON metrics(session_id, timestamp);
CREATE INDEX idx_events_session_timestamp ON events(session_id, timestamp);
CREATE INDEX idx_sessions_started_at ON sessions(started_at);
```

#### 10.4.3 設定ファイル構造

```json
{
  "version": "2.0",
  "connection": {
    "host": "localhost",
    "port": 4455,
    "autoConnect": true,
    "reconnectEnabled": true
  },
  "monitoring": {
    "updateIntervalMs": 1000,
    "streamingModeIntervalMs": 2000
  },
  "alerts": {
    "enabled": true,
    "levels": {
      "critical": true,
      "warning": true,
      "info": true,
      "tips": false
    },
    "thresholds": {
      "cpuWarning": 90,
      "cpuCritical": 95,
      "gpuWarning": 90,
      "gpuCritical": 95,
      "frameDropWarning": 0.5,
      "frameDropCritical": 2.0
    },
    "soundEnabled": true,
    "streamingModeEnabled": true
  },
  "display": {
    "theme": "system",
    "defaultView": "overview",
    "language": "ja",
    "showTechnicalTerms": false
  },
  "accessibility": {
    "reducedMotion": false,
    "highContrast": false,
    "fontSize": "medium"
  },
  "streamingMode": {
    "autoEnable": true,
    "suppressInfoNotifications": true,
    "allowAutoFix": false
  }
}
```

---

## 11. リスクと対策

| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|---------|------|
| obwsクレートの非互換更新 | 高 | 中 | バージョン固定、変更監視、抽象レイヤー導入 |
| OBS WebSocketプロトコル変更 | 高 | 低 | obwsクレート依存、プロトコルバージョンチェック |
| NVML取得失敗（ドライバ不在） | 中 | 中 | フォールバック処理、GPU監視をオプション化 |
| 配信中のツールクラッシュ | 高 | 低 | 徹底的なエラーハンドリング、watchdog実装 |
| メモリリーク | 高 | 中 | 定期的なプロファイリング、長時間テスト |
| 高負荷環境でのパフォーマンス劣化 | 中 | 中 | 動的なポーリング間隔調整、負荷分散 |
| Windows Update非互換 | 中 | 低 | Tauriの安定版使用、OSバージョンチェック |
| ユーザーの設定ミス | 中 | 高 | 堅牢なデフォルト値、バリデーション、ガイド |

---

## 12. 成功指標（KPI）

### 12.1 技術指標

| 指標 | 目標値 | 測定方法 |
|------|--------|---------|
| ドロップフレーム検出率 | 95%以上 | OBSログとの突合 |
| 誤検出率 | 5%未満 | ユーザーフィードバック |
| CPU使用率（UI非表示） | 1%未満 | 自動計測 |
| CPU使用率（UI表示） | 3%未満 | 自動計測 |
| メモリ使用量 | 150MB未満 | 自動計測 |
| 起動時間 | 3秒以内 | 自動計測 |
| クラッシュ率 | 0.1%未満 | クラッシュレポート |

### 12.2 ユーザー体験指標

| 指標 | 目標値 | 測定方法 |
|------|--------|---------|
| オンボーディング完了率 | 80%以上 | アプリ内計測 |
| 推奨設定適用率 | 60%以上 | アプリ内計測 |
| 週間アクティブ率 | 70%以上 | アプリ内計測 |
| ユーザー満足度 | 4.0/5.0以上 | アプリ内アンケート |
| 推奨設定適用後の改善率 | 80%以上 | Before/After比較 |

### 12.3 フェーズ別マイルストーン

| フェーズ | 達成条件 |
|---------|---------|
| Phase 1a | OBS接続・基本監視動作 |
| Phase 1b | 診断・通知・オンボーディング完成 |
| Phase 2a | ワンクリック適用・配信中モード |
| Phase 2b | 詳細分析・履歴比較 |
| Phase 3 | macOS対応・追加機能 |

---

## 13. 対応プラットフォーム推奨値

### 13.1 YouTube Live

| 設定項目 | 推奨値 | 備考 |
|---------|--------|------|
| 解像度 | 1920x1080 (1080p) | 4K対応チャンネルは2160p可 |
| フレームレート | 60fps | ゲーム配信推奨 |
| 映像ビットレート | 4,500-9,000 kbps | 回線速度の80%以下推奨 |
| 音声ビットレート | 128-384 kbps | 歌配信は256kbps以上推奨 |
| エンコーダー | NVENC（優先）/ x264 | GPUがある場合はNVENC |
| キーフレーム間隔 | 2秒 | YouTube必須設定 |
| プロファイル | High | 互換性とのバランス |

### 13.2 Twitch

| 設定項目 | 推奨値 | 備考 |
|---------|--------|------|
| 解像度 | 1920x1080 (1080p) | パートナー以外は936p推奨 |
| フレームレート | 60fps | - |
| 映像ビットレート | 6,000 kbps | Twitch上限 |
| 音声ビットレート | 160 kbps | Twitch推奨 |
| エンコーダー | NVENC（優先）/ x264 | - |
| キーフレーム間隔 | 2秒 | - |

### 13.3 ニコニコ生放送

| 設定項目 | 推奨値 | 備考 |
|---------|--------|------|
| 解像度 | 1920x1080 (1080p) | - |
| フレームレート | 30/60fps | コンテンツに応じて選択 |
| 映像ビットレート | 6,000 kbps | ニコ生上限 |
| 音声ビットレート | 192 kbps | - |
| エンコーダー | NVENC（優先）/ x264 | - |
| キーフレーム間隔 | 2秒 | - |

### 13.4 配信スタイル別補正

| 配信スタイル | ビットレート補正 | 音声補正 | 特記事項 |
|-------------|----------------|---------|---------|
| 雑談・トーク | -20% | 128kbps可 | 動きが少ないため低ビットレートでも高画質維持 |
| ゲーム配信 | 基準値 | 160kbps | 高フレームレート優先 |
| 歌・音楽 | -10% | +64kbps（256kbps以上）| 音声品質優先 |
| お絵描き | -30% | 128kbps可 | 静止画が多いため低ビットレート可 |
| VTuber（Live2D） | +10% | 基準値 | Live2Dの負荷考慮 |

---

## 付録A: 用語集

| 用語 | 説明 |
|------|------|
| obws | OBS WebSocket用のRustクレート |
| NVML | NVIDIA Management Library。GPU情報取得用API |
| Tauri | Rust製の軽量デスクトップアプリフレームワーク |
| CBR | Constant Bit Rate。固定ビットレート |
| VBR | Variable Bit Rate。可変ビットレート |
| NVENC | NVIDIA Video Encoder。GPUによるハードウェアエンコード |
| x264 | ソフトウェアビデオエンコーダー |
| キーフレーム | 完全な画像情報を持つフレーム。これを基準に差分圧縮 |

---

## 付録B: 変更履歴

| 日付 | バージョン | 変更内容 |
|------|----------|---------|
| 2024-12 | v1.0 | 初版作成 |
| 2024-12 | v2.0 | 技術レビュー反映（obws移行、ビットレート計算仕様）、UI/UXレビュー反映（ペルソナ、オンボーディング、アクセシビリティ）、Phase分割（1a/1b）、非機能要件緩和 |
