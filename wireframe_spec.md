# OBS配信最適化ツール ワイヤーフレーム仕様書

**バージョン:** 1.0
**作成日:** 2025-12-20
**対象:** 全5画面 + 共通コンポーネント

## 目次

1. [設計方針](#設計方針)
2. [ホーム画面（ダッシュボード）](#1-ホーム画面ダッシュボード)
3. [監視画面（リアルタイムメトリクス）](#2-監視画面リアルタイムメトリクス)
4. [診断画面（設定比較・最適化提案）](#3-診断画面設定比較最適化提案)
5. [レポート画面（セッション履歴・分析）](#4-レポート画面セッション履歴分析)
6. [オンボーディング画面（初回セットアップ）](#5-オンボーディング画面初回セットアップ)
7. [共通コンポーネント](#6-共通コンポーネント)
8. [共通設計パターン](#共通設計パターン)

---

## Part 1: ホーム・監視・診断画面

---

## 設計方針

### 3段階情報密度モデル
1. **グランスビュー（一瞥）**: 配信中に素早く確認できる最小限の情報
2. **概要ビュー（標準）**: 日常的な監視・操作に必要な情報
3. **詳細ビュー（詳細）**: トラブルシューティングや詳細設定時の完全情報

### 配信中モード
- ワンクリックで配信中モードに切り替え
- 視認性の高い色使い（赤/緑のステータス）
- 最小限のクリック操作
- 常時表示のコンパクトウィンドウオプション

### アクセシビリティ基準（WCAG 2.1 AA準拠）
- **コントラスト比**: テキスト 4.5:1以上、大文字・UI要素 3:1以上
- **キーボード操作**: すべての機能がキーボードのみで操作可能
- **スクリーンリーダー**: ARIAラベル完備、論理的なフォーカス順序
- **タイミング調整可能**: アラートの自動消去に30秒以上の猶予

---

## 1. ホーム画面（ダッシュボード）

### 1.1 グランスビュー

#### ASCIIワイヤーフレーム

```
┌─────────────────────────────────────────────────────────────────────┐
│ OBS Optimizer                           [⚙️ 設定] [🔔] [配信中モード] │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   ┌───────────────────────────────────────────────────────────┐    │
│   │                      システム状態                          │    │
│   │                                                             │    │
│   │                         ● 良好                              │    │
│   │                                                             │    │
│   │                    CPU: 45%  GPU: 32%                       │    │
│   │                  エンコード負荷: 正常                       │    │
│   └───────────────────────────────────────────────────────────┘    │
│                                                                       │
│   ┌──────────────┐  ┌──────────────┐  ┌──────────────┐           │
│   │   配信品質   │  │  ネットワーク │  │   リソース   │           │
│   │              │  │              │  │              │           │
│   │   ● 良好     │  │   ● 安定     │  │   ● 正常     │           │
│   │              │  │              │  │              │           │
│   │   60 fps     │  │  0% ドロップ │  │  CPU 45%     │           │
│   │   1080p      │  │  15ms 遅延   │  │  GPU 32%     │           │
│   │              │  │              │  │              │           │
│   └──────────────┘  └──────────────┘  └──────────────┘           │
│                                                                       │
│   [詳細を表示] または Space キーで概要ビューへ                      │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘

ステータスインジケータ凡例:
● 良好（緑） ◐ 警告（黄） ● エラー（赤）
```

#### UI要素の配置理由

1. **中央配置の総合ステータス**
   - 理由: 視線の最初の着地点として、最も重要な情報を配置
   - 配信中に「一瞥」で状態を把握できる設計
   - ステータスドット（●）は直径24px以上で視認性確保

2. **3分割カード（配信品質/ネットワーク/リソース）**
   - 理由: 情報のグルーピングによる認知負荷低減
   - 均等配置により視覚的バランスを維持
   - 各カードは独立してクリック可能（詳細へドリルダウン）

3. **ヘッダーの右寄せアクション**
   - 理由: 西洋言語の読み方向（左→右）に沿った配置
   - 頻繁に使う「配信中モード」ボタンを最も右に配置

#### インタラクション仕様

| 操作 | 結果 | アニメーション |
|------|------|----------------|
| Space キー押下 | 概要ビューに展開 | 200ms フェードイン |
| カードクリック | 該当セクションの詳細ビューを表示 | 300ms スライドダウン |
| ESC キー | 前のビューに戻る | 200ms フェードアウト |
| Tab キー | フォーカス移動（カード1→2→3→設定→通知→配信中モード） | フォーカスリング表示 |

#### 状態遷移

**正常状態（緑）**
- ステータスドット: #22C55E（緑）
- 背景: #F0FDF4（薄緑）
- テキスト: #166534（濃緑）
- 条件: CPU<60%, GPU<70%, ドロップ率<1%, 遅延<50ms

**警告状態（黄）**
- ステータスドット: #EAB308（黄）
- 背景: #FEFCE8（薄黄）
- テキスト: #854D0E（濃黄）
- 条件: CPU 60-80%, GPU 70-85%, ドロップ率1-3%, 遅延50-100ms
- アクション: 通知バッジ表示 + システムトレイ通知

**エラー状態（赤）**
- ステータスドット: #EF4444（赤）
- 背景: #FEF2F2（薄赤）
- テキスト: #991B1B（濃赤）
- 条件: CPU>80%, GPU>85%, ドロップ率>3%, 遅延>100ms
- アクション: 音声アラート（オプション） + モーダル通知

#### キーボード操作

```
Tab          : 次の要素へフォーカス
Shift+Tab    : 前の要素へフォーカス
Space        : 概要ビューに展開
Enter        : フォーカス中のカードを開く
ESC          : グランスビューに戻る
Ctrl+M       : 配信中モード切り替え
Ctrl+,       : 設定を開く
```

#### アクセシビリティ注記

1. **ARIAラベル**
   ```html
   <div role="status" aria-live="polite" aria-label="システム状態: 良好">
   <button aria-label="配信中モードに切り替え" aria-pressed="false">
   ```

2. **コントラスト比**
   - 正常状態テキスト（#166534 on #F0FDF4）: 8.2:1 ✓
   - 警告状態テキスト（#854D0E on #FEFCE8）: 7.5:1 ✓
   - エラー状態テキスト（#991B1B on #FEF2F2）: 9.1:1 ✓

3. **スクリーンリーダー対応**
   - ステータス変更時に `aria-live` 領域で通知
   - 数値は単位とともに読み上げ（例: "CPU 45パーセント"）

---

### 1.2 概要ビュー

#### ASCIIワイヤーフレーム

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ OBS Optimizer                  [ホーム] [監視] [診断]  [⚙️] [🔔2] [配信中: OFF] │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│ ┌─ システムステータス ─────────────────────────────────────────────────┐    │
│ │  ● 良好  配信可能な状態です                   最終更新: 2秒前        │    │
│ │                                                       [更新] [詳細▼]  │    │
│ └─────────────────────────────────────────────────────────────────────┘    │
│                                                                               │
│ ┌─ 配信品質 ───────────────┐ ┌─ ネットワーク ─────────────────┐          │
│ │                            │ │                                  │          │
│ │  フレームレート            │ │  ドロップフレーム                │          │
│ │  ┌────────────────┐      │ │  ┌──────────────────────┐      │          │
│ │  │  60 / 60 fps    │  ●  │ │  │   0.0%  (0 / 14523)    │  ●  │          │
│ │  └────────────────┘      │ │  └──────────────────────┘      │          │
│ │                            │ │                                  │          │
│ │  解像度                    │ │  ビットレート                    │          │
│ │  1920x1080 (1080p)     ●  │ │  6000 kbps  (目標: 6000)    ●  │          │
│ │                            │ │                                  │          │
│ │  レンダリング遅延          │ │  ネットワーク遅延                │          │
│ │  2.3 ms                ●  │ │  15 ms                      ●  │          │
│ │                            │ │                                  │          │
│ │  [詳細グラフ]              │ │  [接続テスト]                    │          │
│ └────────────────────────┘ └──────────────────────────────┘          │
│                                                                               │
│ ┌─ リソース使用状況 ─────────────────────────────────────────────────┐    │
│ │                                                                       │    │
│ │  CPU使用率               GPU使用率              メモリ使用量         │    │
│ │  ████████░░░░ 45%        ██████░░░░░░ 32%      ████████░░░░ 48%      │    │
│ │  エンコード: 28%         レンダリング: 32%     8.2 GB / 16 GB        │    │
│ │  その他: 17%                                                          │    │
│ │                                                                       │    │
│ │  ディスク I/O: 45 MB/s 読込, 12 MB/s 書込                            │    │
│ │                                                                       │    │
│ │  ⚠️ 推奨アクション: x264プリセットを"veryfast"から"faster"に変更すると  │    │
│ │     品質が向上します（CPU使用率+8%の見込み）   [適用] [詳細]         │    │
│ │                                                                       │    │
│ └─────────────────────────────────────────────────────────────────────┘    │
│                                                                               │
│ ┌─ 最近のイベント ──────────────────────────────────────────────────┐    │
│ │  14:23  ● 配信品質が良好に回復しました                               │    │
│ │  14:20  ◐ フレームドロップを検出 (2.1%, 60秒間)                     │    │
│ │  14:15  ● 配信を開始しました                                         │    │
│ │         [すべて表示]                                                  │    │
│ └─────────────────────────────────────────────────────────────────────┘    │
│                                                                               │
└─────────────────────────────────────────────────────────────────────────────┘

F1: ヘルプ  F5: 更新  Ctrl+D: 詳細ビュー  Ctrl+M: 配信中モード
```

#### UI要素の配置理由

1. **上部ステータスバー（折りたたみ可能）**
   - 理由: グランスビューの総合ステータスを常に可視化
   - 配信中の異常検知時に目立つよう、背景色が状態に応じて変化
   - 「詳細▼」ボタンで詳細ビューへのショートカット提供

2. **2カラムレイアウト（配信品質 | ネットワーク）**
   - 理由: 関連性の高い情報を横並びで比較可能に
   - 左側: 出力品質（配信者がコントロール可能）
   - 右側: 伝送品質（ネットワーク依存）
   - 視線の流れ: 左上→右上→下へ（F字型パターン）

3. **全幅リソース使用状況**
   - 理由: プログレスバーの視認性確保（最小幅300px必要）
   - ボトルネックの即座の特定
   - 推奨アクションを同じコンテキストで表示

4. **最近のイベントタイムライン**
   - 理由: 問題の経緯を時系列で把握
   - 最新3件のみ表示（スクロール不要）
   - タイムスタンプで時間的な関連性を明示

#### インタラクション仕様

| 操作 | 対象 | 結果 | フィードバック |
|------|------|------|----------------|
| クリック | メトリクスカード | 該当メトリクスの詳細グラフをモーダル表示 | 300ms スライドアップ |
| Ctrl+D | グローバル | 詳細ビューに展開 | 即座に切り替え |
| ホバー | プログレスバー | ツールチップで詳細内訳表示 | 100ms 遅延後表示 |
| クリック | 推奨アクションの[適用] | 確認ダイアログ→設定適用→通知 | トースト通知3秒 |
| F5 | グローバル | データ再取得 | ローディングスピナー |

#### 状態遷移の詳細

**メトリクス個別の状態表示**

各メトリクスは独立して状態を持つ:

```
フレームレート
├─ 良好 (●緑): 目標値の95%以上維持
├─ 警告 (◐黄): 目標値の80-95%
└─ エラー (●赤): 目標値の80%未満

ドロップフレーム
├─ 良好 (●緑): 0-1%
├─ 警告 (◐黄): 1-3%
└─ エラー (●赤): 3%以上

CPU/GPU使用率
├─ 良好 (●緑): 0-60%
├─ 警告 (◐黄): 60-80%
└─ エラー (●赤): 80%以上
```

**推奨アクションの表示ロジック**

1. 警告状態が30秒以上継続
2. システムが実行可能な改善策を検出
3. リソースパネル下部に黄色の帯で表示
4. ユーザーがアクションを実行 or 無視すると消える
5. 無視された提案は24時間再表示しない

#### キーボード操作

```
Tab          : フォーカス移動（上→下、左→右の順序）
Shift+Tab    : 逆順フォーカス移動
Enter        : フォーカス中のカード/ボタンを実行
Space        : チェックボックス/トグルの切り替え
Ctrl+D       : 詳細ビューに展開
Ctrl+G       : グランスビューに戻る
F5           : データ更新
F1           : ヘルプを表示
Ctrl+M       : 配信中モード切り替え
矢印キー     : カード間の移動（グリッドナビゲーション）
```

#### アクセシビリティ注記

1. **フォーカスインジケータ**
   - 2px solid #3B82F6（青）のアウトライン
   - オフセット: 2px（要素との間隔）
   - ハイコントラストモードでも視認可能

2. **プログレスバーのARIA**
   ```html
   <div role="progressbar"
        aria-valuenow="45"
        aria-valuemin="0"
        aria-valuemax="100"
        aria-label="CPU使用率">
   ```

3. **動的更新の通知**
   ```html
   <div aria-live="polite" aria-atomic="true">
     CPU使用率が45%に更新されました
   </div>
   ```

4. **色覚異常対応**
   - 状態を色だけでなく形状でも区別（●緑、◐黄、●赤）
   - テキストラベルを併記（「良好」「警告」「エラー」）
   - パターン/テクスチャをプログレスバーに追加可能

---

### 1.3 詳細ビュー

#### ASCIIワイヤーフレーム

```
┌───────────────────────────────────────────────────────────────────────────────────────┐
│ OBS Optimizer          [ホーム] [監視] [診断]  [⚙️] [🔔2] [配信中: OFF]  [グランス表示] │
├───────────────────────────────────────────────────────────────────────────────────────┤
│ ┌─ システムステータス ─────────────────────────────────────────────────────────┐   │
│ │ ● 良好  すべてのメトリクスが正常範囲内です     最終更新: 2秒前  [▲ 折りたたむ] │   │
│ └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                         │
│ ┌─ 配信品質詳細 ─────────────────────────────────┐ ┌─ ネットワーク詳細 ─────────┐  │
│ │                                                  │ │                              │  │
│ │ フレームレート推移 (最近5分)      [1分|5分|1時間] │ │ ドロップフレーム推移         │  │
│ │ ┌────────────────────────────────────────────┐ │ │ ┌──────────────────────┐ │  │
│ │ │ 60fps ▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪ │ │ │ │ 3% ┐                 │ │  │
│ │ │       ████████████████████████████████████ │ │ │ │    │    ▄▄           │ │  │
│ │ │ 30fps ▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪ │ │ │ │ 1% ├────██───────── │ │  │
│ │ │                                              │ │ │ │    │                 │ │  │
│ │ │  0fps ▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪ │ │ │ │ 0% └─────────────── │ │  │
│ │ │       -5m  -4m  -3m  -2m  -1m  now           │ │ │ │    -5m      -1m  now │ │  │
│ │ └────────────────────────────────────────────┘ │ │ └──────────────────────┘ │  │
│ │                                                  │ │                              │  │
│ │ 現在値: 60.0 fps  ●良好                         │ │ 現在値: 0.0% (0/14523) ●    │  │
│ │ 目標値: 60 fps                                  │ │ 許容値: < 1%                │  │
│ │ 最小値: 59.8 fps (14:20:15)                     │ │ 最大値: 2.1% (14:20:35)     │  │
│ │ 平均値: 59.95 fps                               │ │ 平均値: 0.3%                │  │
│ │                                                  │ │                              │  │
│ │ 解像度: 1920x1080 (1080p)                       │ │ ビットレート推移             │  │
│ │ アスペクト比: 16:9                              │ │ ┌──────────────────────┐ │  │
│ │ カラーフォーマット: NV12                        │ │ │ 7000┐                 │ │  │
│ │ カラースペース: sRGB                            │ │ │     │ ▄▄▄▄▄▄▄▄▄▄▄▄▄ │ │  │
│ │                                                  │ │ │ 6000├─████████████── │ │  │
│ │ レンダリング遅延: 2.3 ms ●                     │ │ │     │                 │ │  │
│ │ エンコード遅延: 1.8 ms ●                       │ │ │ 5000└─────────────── │ │  │
│ │ 合計遅延: 4.1 ms                                │ │ │     -5m         now   │ │  │
│ │                                                  │ │ └──────────────────────┘ │  │
│ │ スキップフレーム:                               │ │                              │  │
│ │ - レンダリング: 0 (0.0%)  ●                    │ │ 現在値: 6000 kbps ●         │  │
│ │ - エンコード: 0 (0.0%)  ●                      │ │ 目標値: 6000 kbps           │  │
│ │ - ネットワーク: 0 (0.0%)  ●                    │ │ 変動係数: 1.2% (安定)       │  │
│ │                                                  │ │                              │  │
│ │ [CSVエクスポート] [グラフを画像保存]             │ │ ネットワーク遅延: 15 ms ● │  │
│ └──────────────────────────────────────────────┘ │ パケットロス: 0.0% ●       │  │
│                                                      │ ジッタ: 2 ms ●            │  │
│ ┌─ リソース詳細 ─────────────────────────────────┐ │                              │  │
│ │                                                  │ │ サーバー: rtmp://live.      │  │
│ │ CPU使用率 (プロセス別)                          │ │          twitch.tv/app      │  │
│ │ ┌────────────────────────────────────────────┐ │ │ 接続時間: 00:15:23          │  │
│ │ │ obs64.exe         ████████░░ 28% (エンコード)│ │ │                              │  │
│ │ │ dwm.exe           ███░░░░░░░  9% (合成)     │ │ │ [接続テスト] [再接続]       │  │
│ │ │ その他システム    ████░░░░░░ 17%             │ │ └──────────────────────────┘  │
│ │ │ ────────────────────────────────────────────│ │                                  │
│ │ │ 合計 CPU使用率:  ████████░░ 45% / 100%       │ │                                  │
│ │ └────────────────────────────────────────────┘ │                                  │
│ │                                                  │                                  │
│ │ GPU使用率 (エンジン別)                          │                                  │
│ │ ┌────────────────────────────────────────────┐ │                                  │
│ │ │ 3D              ██████░░░░ 25%              │ │                                  │
│ │ │ Copy            ██░░░░░░░░  5%              │ │                                  │
│ │ │ Video Encode    ██░░░░░░░░  2%              │ │                                  │
│ │ │ ────────────────────────────────────────────│ │                                  │
│ │ │ 合計 GPU使用率: ██████░░░░ 32% / 100%       │ │                                  │
│ │ │ VRAM使用率:     ████████░░ 4.2GB / 8GB      │ │                                  │
│ │ └────────────────────────────────────────────┘ │                                  │
│ │                                                  │                                  │
│ │ メモリ使用量                                    │                                  │
│ │ OBSプロセス: 1.2 GB                             │                                  │
│ │ システム全体: 8.2 GB / 16 GB (48%)              │                                  │
│ │ 利用可能: 7.8 GB                                │                                  │
│ │                                                  │                                  │
│ │ ディスク I/O                                    │                                  │
│ │ 読込: 45 MB/s  書込: 12 MB/s                    │                                  │
│ │ 録画ファイルサイズ: 2.3 GB (00:15:23)           │                                  │
│ │ 残り容量: 245 GB (推定録画可能時間: 26時間)     │                                  │
│ │                                                  │                                  │
│ └──────────────────────────────────────────────┘                                  │
│                                                                                         │
│ ┌─ イベントログ (フィルタ: すべて▼) ────────────────────────────────────────┐   │
│ │ 🔍 [検索...]                                    [エラーのみ] [警告以上] [すべて]  │   │
│ │ ┌─────────────────────────────────────────────────────────────────────────┐ │   │
│ │ │ 14:23:45  ● INFO     配信品質が良好に回復しました                        │ │   │
│ │ │ 14:20:35  ◐ WARNING  フレームドロップ検出 (2.1%, 継続時間: 60秒)        │ │   │
│ │ │           ├─ 原因: CPU使用率スパイク (82%)                               │ │   │
│ │ │           └─ 推奨: エンコードプリセットの軽量化                         │ │   │
│ │ │ 14:20:00  ● INFO     CPU使用率が80%を超えました                          │ │   │
│ │ │ 14:15:12  ● INFO     配信を開始しました (プラットフォーム: Twitch)       │ │   │
│ │ │ 14:15:10  ● INFO     サーバーに接続しました (遅延: 15ms)                 │ │   │
│ │ │ 14:15:08  ● INFO     エンコーダー初期化完了 (x264, preset: veryfast)     │ │   │
│ │ │                                                                            │ │   │
│ │ │                                    [25件表示中 / 全148件]  [もっと見る]  │ │   │
│ │ └─────────────────────────────────────────────────────────────────────────┘ │   │
│ │ [CSVエクスポート] [ログをクリア]                                              │   │
│ └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                         │
└───────────────────────────────────────────────────────────────────────────────────────┘

Ctrl+G: グランス  Ctrl+S: 概要  F1: ヘルプ  Ctrl+E: エクスポート  Ctrl+M: 配信中モード
```

#### UI要素の配置理由

1. **折りたたみ可能なステータスバー**
   - 理由: 詳細情報を見る際に画面上部を節約
   - 「▲ 折りたたむ」ボタンでスペース効率を向上
   - 折りたたみ状態もローカルストレージに保存

2. **タイムライングラフの優先表示**
   - 理由: トラブルシューティングには時系列データが必須
   - 5分/1時間などの期間切り替えで異なる粒度の分析が可能
   - グラフの縦軸は動的スケール（最大値に応じて調整）

3. **統計値の並列表示**
   - 現在値/目標値/最小値/最大値/平均値を一覧
   - 理由: 異常値の特定と傾向分析を支援
   - タイムスタンプ付きで特定時刻の問題を追跡可能

4. **プロセス別/エンジン別の内訳**
   - 理由: ボトルネック特定の精度向上
   - OBS以外のプロセスの影響も可視化
   - GPU使用率をエンジン別に分解（3D/Copy/Video Encode）

5. **階層構造のイベントログ**
   - 理由: 因果関係の理解を促進
   - 警告/エラーに対する「原因」「推奨」を紐づけ
   - インデント（├─└─）で視覚的に関連性を表現

#### インタラクション仕様

| 操作 | 対象 | 結果 | データ更新 |
|------|------|------|------------|
| クリック | 期間切り替え（1分/5分/1時間） | グラフのX軸範囲変更 | APIリクエスト |
| ドラッグ | グラフ領域 | ズーム/パン操作 | ローカル再描画 |
| ホバー | グラフデータポイント | ツールチップで正確な値表示 | なし |
| クリック | イベントログのエントリ | 詳細モーダル（関連メトリクス表示） | なし |
| 入力 | 検索ボックス | リアルタイムフィルタリング | ローカル |
| クリック | CSVエクスポート | ファイル保存ダイアログ | データ生成 |
| Ctrl+G | グローバル | グランスビューに切り替え | なし |
| Ctrl+F | グローバル | ログ検索にフォーカス | なし |

#### 状態遷移

**グラフの状態表示**

```
正常範囲（緑の帯）: 目標値±5%
警告範囲（黄の帯）: 目標値±5-15%
エラー範囲（赤の帯）: 目標値±15%以上
```

**データ更新頻度**

- グランスビュー: 1秒ごと
- 概要ビュー: 2秒ごと
- 詳細ビュー: 5秒ごと（グラフは蓄積）
- 配信中モード: すべて1秒ごと

**イベントログのフィルタ状態**

1. すべて: INFO, WARNING, ERROR
2. 警告以上: WARNING, ERROR
3. エラーのみ: ERROR
4. 検索適用時: フィルタ + 検索条件のAND

#### キーボード操作

```
Tab/Shift+Tab   : セクション間フォーカス移動
矢印キー        : グラフ/ログエントリのナビゲーション
Enter           : フォーカス中のエントリを展開
Space           : チェックボックス切り替え
Ctrl+G          : グランスビューに切り替え
Ctrl+S          : 概要ビューに切り替え
Ctrl+F          : ログ検索にフォーカス
Ctrl+E          : データをエクスポート
Ctrl+,          : 表示設定を開く
Home            : ログの最新エントリにスクロール
End             : ログの最古エントリにスクロール
Page Up/Down    : ログの高速スクロール
```

#### アクセシビリティ注記

1. **グラフのアクセシブル代替**
   ```html
   <table aria-label="フレームレート推移データテーブル">
     <caption>最近5分間のフレームレート（1秒間隔）</caption>
     <thead><tr><th>時刻</th><th>FPS</th></tr></thead>
     <tbody>
       <tr><td>14:25:00</td><td>60.0</td></tr>
       ...
     </tbody>
   </table>
   ```
   - スクリーンリーダー用にデータテーブルを提供
   - グラフと同期して更新

2. **動的コンテンツの通知**
   ```html
   <div role="log" aria-live="polite" aria-relevant="additions">
     <!-- 新しいログエントリ -->
   </div>
   ```
   - 新しいイベントが追加されたら読み上げ
   - `aria-live="polite"` で配信中の邪魔にならない

3. **複雑なUIの説明**
   - ツールチップに詳細説明を含める
   - `aria-describedby` で関連する説明文を紐づけ
   - 初回表示時にオプションでツアーを提供

4. **高コントラストモード対応**
   - グラフの線をパターン化（実線/点線/破線）
   - ステータスドットを形状でも区別
   - Windows High Contrast Mode で自動適応

---

## 2. 監視画面（リアルタイムメトリクス）

### 2.1 標準ビュー

#### ASCIIワイヤーフレーム

```
┌───────────────────────────────────────────────────────────────────────────────────────┐
│ OBS Optimizer          [ホーム] [監視] [診断]  [⚙️] [🔔2] [配信中: OFF]  [コンパクト化] │
├───────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                         │
│ ┌─ リアルタイム監視 ─────────────────────────────────────────────────────────────┐ │
│ │  更新間隔: [1秒▼]  表示期間: [5分|10分|30分|1時間]  [一時停止] [スナップショット] │ │
│ └───────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                         │
│ ┌─ メトリクスグラフ ─────────────────────────────────────────────────────────────┐ │
│ │                                                                                     │ │
│ │ フレームレート                                  [最小化] [設定] [×非表示]         │ │
│ │ ┌─────────────────────────────────────────────────────────────────────────────┐ │ │
│ │ │ 60 ┐▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ (60.0) │ │ │
│ │ │    │████████████████████████████████████████████████████████████████        │ │ │
│ │ │ 30 ├─────────────────────────────────────────────────────────────────────── │ │ │
│ │ │    │                                                                         │ │ │
│ │ │  0 └─────────────────────────────────────────────────────────────────────── │ │ │
│ │ │      -5m              -3m              -1m              now                 │ │ │
│ │ └─────────────────────────────────────────────────────────────────────────────┘ │ │
│ │ ● 良好  現在: 60.0 fps  平均: 59.95  最小: 59.8  最大: 60.0                    │ │
│ │                                                                                     │ │
│ │ CPU使用率                                       [最小化] [設定] [×非表示]         │ │
│ │ ┌─────────────────────────────────────────────────────────────────────────────┐ │ │
│ │ │100 ┐                                                                         │ │ │
│ │ │    │                                         ▄▄▄                             │ │ │
│ │ │ 50 ├─────────────────────────────────▄▄▄▄▄▄▄███▄▄▄──────────────────────── │ │ │
│ │ │    │▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄███████████████████▄▄▄▄▄▄▄▄▄▄▄▄        │ │ │
│ │ │  0 └─────────────────────────────────────────────────────────────────────── │ │ │
│ │ │      -5m              -3m              -1m              now                 │ │ │
│ │ └─────────────────────────────────────────────────────────────────────────────┘ │ │
│ │ ◐ 警告  現在: 72% (OBS:28%, DWM:9%, その他:35%)  平均: 58%  ピーク: 82% @14:20 │ │
│ │                                                                                     │ │
│ │ GPU使用率                                       [最小化] [設定] [×非表示]         │ │
│ │ ┌─────────────────────────────────────────────────────────────────────────────┐ │ │
│ │ │100 ┐                                                                         │ │ │
│ │ │    │                                                                         │ │ │
│ │ │ 50 ├─────────────────────────────────────────────────────────────────────── │ │ │
│ │ │    │▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄        │ │ │
│ │ │  0 └─────────────────────────────────────────────────────────────────────── │ │ │
│ │ │      -5m              -3m              -1m              now                 │ │ │
│ │ └─────────────────────────────────────────────────────────────────────────────┘ │ │
│ │ ● 良好  現在: 32% (3D:25%, Copy:5%, Encode:2%)  VRAM: 4.2GB/8GB                │ │
│ │                                                                                     │ │
│ │ ドロップフレーム率                              [最小化] [設定] [×非表示]         │ │
│ │ ┌─────────────────────────────────────────────────────────────────────────────┐ │ │
│ │ │ 5% ┐                        ▄▄                                               │ │ │
│ │ │    │                       ▄██▄                                              │ │ │
│ │ │ 2% ├───────────────────────████──────────────────────────────────────────── │ │ │
│ │ │    │                      ██████                                             │ │ │
│ │ │ 0% └──────────────────────██████───────────────────────────────────────────  │ │ │
│ │ │      -5m              -3m  ^-1m              now                             │ │ │
│ │ └─────────────────────────────────────────────────────────────────────────────┘ │ │
│ │ ● 良好  現在: 0.0%  イベント: 1回 (2.1%, 60秒間 @14:20)  [詳細]               │ │
│ │                                                                                     │ │
│ │ ビットレート                                    [最小化] [設定] [×非表示]         │ │
│ │ ┌─────────────────────────────────────────────────────────────────────────────┐ │ │
│ │ │7000┐                                                                         │ │ │
│ │ │    │▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄        │ │ │
│ │ │6000├─████████████████████████████████████████████████████████████────────── │ │ │
│ │ │    │                                                                         │ │ │
│ │ │5000└─────────────────────────────────────────────────────────────────────── │ │ │
│ │ │      -5m              -3m              -1m              now                 │ │ │
│ │ └─────────────────────────────────────────────────────────────────────────────┘ │ │
│ │ ● 良好  現在: 6000 kbps  目標: 6000  変動: ±1.2%  パケットロス: 0.0%          │ │
│ │                                                                                     │ │
│ │ [+ メトリクスを追加]  利用可能: メモリ, ディスクI/O, ネットワーク遅延, 温度... │ │
│ └─────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                         │
│ ┌─ アラート履歴 ─────────────────────────────────────────────────────────────────┐ │
│ │  フィルタ: [すべて▼]  期間: [過去1時間▼]                        [すべてクリア]  │ │
│ │ ┌─────────────────────────────────────────────────────────────────────────────┐ │ │
│ │ │ 14:20:35  ◐ WARNING  CPU使用率スパイク (82% for 60秒)            [解決済み] │ │ │
│ │ │           └─ トリガー: CPU > 80%                                             │ │ │
│ │ │           └─ 影響: フレームドロップ 2.1%                                     │ │ │
│ │ │           └─ 推奨: エンコードプリセットを軽量化  [適用する]                 │ │ │
│ │ │                                                                               │ │ │
│ │ │ 14:15:20  ● INFO     配信開始                                    [確認済み] │ │ │
│ │ │                                                                               │ │ │
│ │ │ 14:10:05  ◐ WARNING  ネットワーク遅延が上昇 (85ms)               [解決済み] │ │ │
│ │ │           └─ トリガー: 遅延 > 50ms                                           │ │ │
│ │ │           └─ 自動解決: 45秒後に正常化                                       │ │ │
│ │ └─────────────────────────────────────────────────────────────────────────────┘ │ │
│ │  [3件表示中 / 全12件]  [もっと見る]                                             │ │
│ └─────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                         │
└───────────────────────────────────────────────────────────────────────────────────────┘

Ctrl+P: 一時停止/再開  Ctrl+T: スナップショット  Ctrl+C: コンパクトビュー  F5: 更新
```

#### UI要素の配置理由

1. **グラフの垂直スタック配置**
   - 理由: 時間軸を揃えることで相関関係を視覚的に把握
   - 例: CPU使用率のスパイクとフレームドロップの同期を確認
   - 各グラフは独立してリサイズ・非表示可能

2. **グラフ上部のクイックアクション**
   - [最小化]: グラフを1行の数値表示に折りたたみ
   - [設定]: Y軸範囲、色、アラート閾値を調整
   - [×非表示]: ワークスペースから完全に削除（設定で復元可能）

3. **リアルタイム統計の下部表示**
   - 理由: グラフだけでは正確な値が読み取りにくい
   - ステータスドット + 主要統計値のコンパクト表示
   - 警告時は内訳（プロセス別など）を自動展開

4. **アラート履歴の分離**
   - 理由: グラフとログを同時に視認可能に
   - 履歴から該当時刻のグラフにジャンプ可能（クリックで縦線表示）
   - 推奨アクションをその場で適用

#### インタラクション仕様

| 操作 | 対象 | 結果 | パフォーマンス影響 |
|------|------|------|---------------------|
| ドラッグ | グラフ境界 | 高さ調整 | なし（CSSのみ） |
| ダブルクリック | グラフタイトル | 最大化/元に戻す | レイアウト再計算 |
| ホバー | グラフデータポイント | 十字線 + ツールチップ | Canvas再描画 |
| クリック | アラート履歴エントリ | グラフに縦線表示 | Canvas再描画 |
| Ctrl+P | グローバル | 更新一時停止/再開 | データ取得停止/再開 |
| Ctrl+T | グローバル | 現在状態をスナップショット保存 | PNG生成 |
| ドラッグ&ドロップ | グラフ | 表示順序入れ替え | DOM操作 |

#### コンパクトビュー（配信中モード）

配信中モード時、またはCtrl+Cで切り替え可能な簡易表示:

```
┌─────────────────────────────────────────────────────────┐
│ OBS Optimizer - コンパクト監視         [元に戻す] [×]   │
├─────────────────────────────────────────────────────────┤
│                                                           │
│  ● 良好  60fps  CPU:72% ◐  GPU:32%  ドロップ:0.0%      │
│                                                           │
│  ┌─ CPU ───────────────────────────────────────────┐   │
│  │ ████████████████░░░░ 72%  [▼詳細]                │   │
│  └──────────────────────────────────────────────────┘   │
│                                                           │
│  最新アラート: 14:20 CPU高負荷  [詳細]                  │
│                                                           │
│  [常に手前に表示]  [透明度: 90%]                         │
│                                                           │
└─────────────────────────────────────────────────────────┘
```

- 最小サイズ: 300x200px
- 常時最前面表示オプション
- 透明度調整（50-100%）
- ドラッグで画面内の任意の位置に配置

#### 状態遷移

**グラフの色分け**

```
フレームレート: 青 (#3B82F6)
CPU使用率: 橙 (#F97316)
  ├─ 60%未満: 緑系グラデーション
  ├─ 60-80%: 黄系グラデーション
  └─ 80%以上: 赤系グラデーション
GPU使用率: 紫 (#A855F7)
ドロップフレーム: 赤 (#EF4444)
  ├─ 背景: 常に薄赤で警告感を強調
ビットレート: 緑 (#22C55E)
```

**アラートの自動解決**

1. 警告条件が30秒間継続 → アラート発火
2. 正常条件に復帰 → 「解決済み」バッジ付与
3. 解決から5分経過 → 履歴から自動アーカイブ
4. ユーザーが[確認済み]をクリック → 即座にアーカイブ

#### キーボード操作

```
Ctrl+P          : グラフ更新を一時停止/再開
Ctrl+T          : スナップショット保存
Ctrl+C          : コンパクトビューに切り替え
Ctrl++/-        : グラフのY軸スケール拡大/縮小
Ctrl+0          : Y軸スケールをリセット
矢印上/下       : グラフ間フォーカス移動
矢印左/右       : グラフを時間軸方向にスクロール
Home/End        : グラフの最古/最新にジャンプ
Space           : フォーカス中のグラフを展開/折りたたみ
Delete          : フォーカス中のアラートを削除
Ctrl+A          : すべてのグラフを選択
Ctrl+H          : 選択中のグラフを非表示
```

#### アクセシビリティ注記

1. **グラフの代替テキスト**
   ```html
   <canvas aria-label="CPU使用率グラフ" role="img">
   <div role="region" aria-describedby="cpu-description">
   <p id="cpu-description">
     過去5分間のCPU使用率推移。現在72%で警告レベルです。
     ピークは14時20分の82%でした。
   </p>
   ```

2. **音声アラート（オプション）**
   - 設定で有効化可能
   - エラーレベルのみ音声通知（ビープ音）
   - 音量・音色をカスタマイズ可能
   - WCAG 1.4.2: 音声制御のため3秒以内に停止可能

3. **アニメーション制御**
   - `prefers-reduced-motion` メディアクエリに対応
   - グラフ更新をスムーズスクロールから即座更新に変更
   - トランジションを無効化

4. **データテーブルへのエクスポート**
   - すべてのグラフデータをCSV形式でエクスポート
   - スクリーンリーダーで読み取り可能な形式
   - タイムスタンプ + 各メトリクスの列

---

## 3. 診断画面（設定比較・最適化提案）

### 3.1 メインビュー

#### ASCIIワイヤーフレーム

```
┌───────────────────────────────────────────────────────────────────────────────────────┐
│ OBS Optimizer          [ホーム] [監視] [診断]  [⚙️] [🔔2] [配信中: OFF]                │
├───────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                         │
│ ┌─ 診断と最適化 ─────────────────────────────────────────────────────────────────┐ │
│ │  プラットフォーム: [Twitch ▼]  解像度: [1080p ▼]  用途: [ゲーム配信 ▼]          │ │
│ │  [診断を実行]  最終診断: 2025-12-20 14:15  [レポート保存]                        │ │
│ └───────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                         │
│ ┌─ 総合スコア ───────────────────────────────────────────────────────────────────┐ │
│ │                                                                                     │ │
│ │                        現在の設定: 72/100  C                                       │ │
│ │                                                                                     │ │
│ │                    ┌────────────────────────────┐                                 │ │
│ │                    │   ████████████████░░░░░░   │                                 │ │
│ │                    └────────────────────────────┘                                 │ │
│ │                                                                                     │ │
│ │         最適化後の予測スコア: 92/100  A                                            │ │
│ │                                                                                     │ │
│ │         改善見込み: +20ポイント (+28%)                                             │ │
│ │         推定改善項目: 配信品質 +15%, CPU効率 +20%, 安定性 +10%                    │ │
│ │                                                                                     │ │
│ └─────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                         │
│ ┌─ 設定比較 (現在 vs 推奨) ──────────────────────────────────────────────────────┐ │
│ │  表示: [すべて] [差分のみ] [高影響のみ]                   [すべて適用] [リセット] │ │
│ │                                                                                     │ │
│ │  ┌─ エンコーダー設定 ────────────────────────────────────────────────────┐     │ │
│ │  │  影響度: ████████░░ 高  改善見込み: 配信品質+15%, CPU-10%                │     │ │
│ │  │                                                                            │     │ │
│ │  │  エンコーダー                                                              │     │ │
│ │  │  ┌────────────────────┐    →    ┌────────────────────┐             │     │ │
│ │  │  │ 現在: x264          │         │ 推奨: NVIDIA NVENC  │  [☑適用]  │     │ │
│ │  │  └────────────────────┘         └────────────────────┘             │     │ │
│ │  │  理由: GPU利用でCPU負荷を軽減。ゲーム配信では品質差はほぼ知覚不能。      │     │ │
│ │  │  トレードオフ: VRAM +800MB使用                                            │     │ │
│ │  │                                                                            │     │ │
│ │  │  プリセット                                                                │     │ │
│ │  │  ┌────────────────────┐    →    ┌────────────────────┐             │     │ │
│ │  │  │ 現在: veryfast      │         │ 推奨: Quality       │  [☑適用]  │     │ │
│ │  │  └────────────────────┘         └────────────────────┘             │     │ │
│ │  │  理由: NVENCのQualityプリセットはx264 veryfastより高品質。              │     │ │
│ │  │                                                                            │     │ │
│ │  │  レート制御                                                                │     │ │
│ │  │  ┌────────────────────┐    →    ┌────────────────────┐             │     │ │
│ │  │  │ 現在: CBR           │         │ 推奨: CBR (変更なし)│  [□適用]  │     │ │
│ │  │  └────────────────────┘         └────────────────────┘             │     │ │
│ │  │  理由: CBRは配信に最適。変更不要。                                        │     │ │
│ │  │                                                                            │     │ │
│ │  │  [▲折りたたむ]                                                             │     │ │
│ │  └────────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                                     │ │
│ │  ┌─ 出力設定 ─────────────────────────────────────────────────────────┐     │ │
│ │  │  影響度: ██████░░░░ 中  改善見込み: 安定性+10%                          │     │ │
│ │  │                                                                            │     │ │
│ │  │  ビットレート                                                              │     │ │
│ │  │  ┌────────────────────┐    →    ┌────────────────────┐             │     │ │
│ │  │  │ 現在: 6000 kbps     │         │ 推奨: 6000 kbps     │  [□適用]  │     │ │
│ │  │  └────────────────────┘         └────────────────────┘             │     │ │
│ │  │  理由: Twitch 1080p60の推奨値。変更不要。                                 │     │ │
│ │  │                                                                            │     │ │
│ │  │  キーフレーム間隔                                                          │     │ │
│ │  │  ┌────────────────────┐    →    ┌────────────────────┐             │     │ │
│ │  │  │ 現在: 0 (自動)      │         │ 推奨: 2秒           │  [☑適用]  │     │ │
│ │  │  └────────────────────┘         └────────────────────┘             │     │ │
│ │  │  理由: Twitchは2秒を要求。自動値は不安定な場合あり。                      │     │ │
│ │  │                                                                            │     │ │
│ │  │  [▼展開]                                                                   │     │ │
│ │  └────────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                                     │ │
│ │  ┌─ 映像設定 ─────────────────────────────────────────────────────────┐     │ │
│ │  │  影響度: ████░░░░░░ 低  改善見込み: 品質+2%                             │     │ │
│ │  │  [▼展開]                                                                   │     │ │
│ │  └────────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                                     │ │
│ │  ┌─ 詳細設定 ─────────────────────────────────────────────────────────┐     │ │
│ │  │  影響度: ██████░░░░ 中  改善見込み: CPU効率+20%                         │     │ │
│ │  │  [▼展開]                                                                   │     │ │
│ │  └────────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                                     │ │
│ └─────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                         │
│ ┌─ クイックアクション ───────────────────────────────────────────────────────────┐ │
│ │                                                                                     │ │
│ │  ┌─────────────────────┐  ┌─────────────────────┐  ┌─────────────────────┐  │ │
│ │  │ 🎯 推奨設定を一括適用 │  │ 💾 現在の設定を保存  │  │ ↩️  前回の設定に戻す │  │ │
│ │  │                      │  │                      │  │                      │  │ │
│ │  │ 5項目を変更します    │  │ プロファイルとして  │  │ 2025-12-19 の状態   │  │ │
│ │  │                      │  │ 保存できます        │  │                      │  │ │
│ │  │ [実行]               │  │ [保存]               │  │ [復元]               │  │ │
│ │  └─────────────────────┘  └─────────────────────┘  └─────────────────────┘  │ │
│ │                                                                                     │ │
│ └─────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                         │
│ ┌─ 最適化履歴 ───────────────────────────────────────────────────────────────────┐ │
│ │  2025-12-20 14:15  スコア: 72→92 (+20)  適用: 5項目  [詳細] [復元]              │ │
│ │  2025-12-19 10:30  スコア: 68→72 (+4)   適用: 2項目  [詳細] [復元]              │ │
│ └─────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                         │
└───────────────────────────────────────────────────────────────────────────────────────┘

Ctrl+R: 診断実行  Ctrl+A: すべて適用  Ctrl+Z: 元に戻す  Tab: 次のセクション
```

#### UI要素の配置理由

1. **プラットフォーム選択を最上部に配置**
   - 理由: 推奨設定はプラットフォームに強く依存
   - Twitch/YouTube/Facebook/カスタムで異なるビットレート・キーフレーム設定
   - 変更時に即座に再診断を実行

2. **総合スコアの視覚化**
   - 理由: 改善の度合いを直感的に理解
   - 現在値と予測値を並べて表示
   - 100点満点のグレード（S/A/B/C/D/F）で評価

3. **影響度ベースの並び順**
   - 理由: ユーザーは効果の高い変更を優先したい
   - 高影響→中影響→低影響の順で表示
   - [高影響のみ]フィルタで上位項目に集中可能

4. **設定項目の左右比較レイアウト**
   - 理由: 変更内容を明確に把握
   - 矢印（→）で変化の方向性を強調
   - チェックボックスで個別の適用/除外を制御

5. **理由とトレードオフの明記**
   - 理由: ユーザーの理解と納得を促進
   - 専門用語は避け、効果を具体的に記述
   - デメリット（VRAM増加など）も隠さず表示

#### インタラクション仕様

| 操作 | 対象 | 結果 | 確認ダイアログ |
|------|------|------|----------------|
| クリック | [診断を実行] | システム状態を分析→推奨設定を生成 | なし（3秒程度の処理） |
| クリック | チェックボックス | 該当項目の適用/除外を切り替え | なし |
| クリック | [すべて適用] | チェック済み項目をOBS設定に反映 | あり（変更内容の確認） |
| クリック | [実行]（一括適用） | 推奨設定をすべて適用 | あり（5項目の詳細表示） |
| クリック | [復元]（履歴から） | 過去の設定に戻す | あり（現在設定が失われる警告） |
| クリック | セクション展開/折りたたみ | アコーディオン動作 | なし |
| Ctrl+R | グローバル | 診断を実行 | なし |
| Ctrl+A | グローバル | すべてのチェックボックスをON | なし |
| Ctrl+Z | グローバル | 直前の適用を取り消し | なし（Undo履歴から復元） |

#### 影響度の視覚化

**影響度の計算基準**

```
高影響（80-100%）:
- エンコーダー変更（x264⇔NVENC⇔QuickSync）
- ビットレート大幅変更（±20%以上）
- 解像度変更

中影響（40-79%）:
- プリセット変更
- キーフレーム間隔変更
- プロセス優先度変更

低影響（1-39%）:
- カラーフォーマット変更
- 音声ビットレート微調整
- UI設定変更
```

**スコアリングアルゴリズム**

```
総合スコア = 加重平均(
  配信品質 × 40%,
  CPU効率 × 30%,
  安定性 × 20%,
  互換性 × 10%
)

配信品質 = f(ビットレート, エンコーダー, プリセット, 解像度)
CPU効率 = f(エンコーダー, プリセット, プロセス優先度)
安定性 = f(ドロップ率, レート制御, キーフレーム間隔)
互換性 = f(プラットフォーム要件との一致度)
```

#### プラットフォーム別の推奨設定

```
┌────────────┬──────────┬──────────┬────────────┬───────────┐
│ 設定項目   │ Twitch   │ YouTube  │ Facebook   │ カスタム  │
├────────────┼──────────┼──────────┼────────────┼───────────┤
│ 1080p60    │ 6000kbps │ 9000kbps │ 4000kbps   │ 手動設定  │
│ ビットレート│          │          │            │           │
├────────────┼──────────┼──────────┼────────────┼───────────┤
│ キーフレーム│ 2秒      │ 2秒      │ 2秒        │ 手動設定  │
│ 間隔       │          │          │            │           │
├────────────┼──────────┼──────────┼────────────┼───────────┤
│ 推奨       │ NVENC    │ x264 slow│ NVENC      │ 自動検出  │
│ エンコーダー│          │(高品質)  │            │           │
└────────────┴──────────┴──────────┴────────────┴───────────┘
```

#### 状態遷移

**診断実行のフロー**

```
[診断を実行] クリック
    ↓
ローディング表示（3秒）
    ↓
OBS設定ファイル読み込み
    ↓
システムリソース取得
    ↓
プラットフォーム要件と照合
    ↓
推奨設定生成
    ↓
差分リスト表示
    ↓
スコア計算・表示
```

**適用時の確認ダイアログ**

```
┌─────────────────────────────────────────────┐
│ 設定変更の確認                               │
├─────────────────────────────────────────────┤
│                                              │
│ 以下の5項目を変更します:                    │
│                                              │
│ ✓ エンコーダー: x264 → NVIDIA NVENC         │
│ ✓ プリセット: veryfast → Quality            │
│ ✓ キーフレーム間隔: 0 → 2秒                 │
│ ✓ プロセス優先度: 通常 → 高                 │
│ ✓ Look-ahead: オフ → オン                    │
│                                              │
│ 予測される効果:                              │
│ • 配信品質 +15%                              │
│ • CPU使用率 -10%                             │
│ • VRAM使用量 +800MB                          │
│                                              │
│ ⚠️ 配信中の場合、設定変更には配信の         │
│    再起動が必要です。                        │
│                                              │
│ [適用する] [キャンセル] [詳細を確認]        │
└─────────────────────────────────────────────┘
```

#### キーボード操作

```
Tab             : 次のセクション/項目にフォーカス
Shift+Tab       : 前のセクション/項目にフォーカス
Space           : チェックボックス切り替え / セクション展開
Enter           : フォーカス中のボタンを実行
矢印上/下       : セクション内の項目移動
矢印左/右       : セクション間移動
Ctrl+R          : 診断を実行
Ctrl+A          : すべて選択
Ctrl+D          : すべて選択解除
Ctrl+Shift+A    : すべて適用
Ctrl+Z          : 元に戻す
Ctrl+Shift+Z    : やり直し
Ctrl+S          : 現在の設定を保存
F1              : このセクションのヘルプを表示
```

#### アクセシビリティ注記

1. **比較レイアウトのスクリーンリーダー対応**
   ```html
   <div role="group" aria-labelledby="encoder-label">
     <h4 id="encoder-label">エンコーダー</h4>
     <p aria-label="現在の設定">x264</p>
     <p aria-label="推奨設定">NVIDIA NVENC</p>
     <p aria-label="変更理由">
       GPU利用でCPU負荷を軽減。ゲーム配信では品質差はほぼ知覚不能。
     </p>
   </div>
   ```

2. **影響度の代替表現**
   - プログレスバーに `aria-valuenow/valuemin/valuemax`
   - テキストでも「高影響」「中影響」「低影響」を明記
   - 色だけでなくバーの長さでも区別

3. **確認ダイアログの警告**
   ```html
   <div role="alertdialog" aria-labelledby="dialog-title" aria-describedby="dialog-desc">
     <h2 id="dialog-title">設定変更の確認</h2>
     <div id="dialog-desc">
       以下の5項目を変更します...
     </div>
   </div>
   ```

4. **変更内容のライブ通知**
   - チェックボックス変更時に `aria-live` で通知
   - 「エンコーダー設定を適用対象に追加しました」
   - 過度な通知を避けるため `polite` レベル使用

---

## 共通設計パターン

### カラーパレット（WCAG AA準拠）

```
プライマリ（青系）:
  - Primary: #3B82F6 (ボタン、リンク)
  - Primary Dark: #1E40AF (ホバー)
  - Primary Light: #DBEAFE (背景)

ステータスカラー:
  - Success: #22C55E (正常)
  - Warning: #EAB308 (警告)
  - Error: #EF4444 (エラー)
  - Info: #3B82F6 (情報)

グレースケール:
  - Gray 900: #111827 (見出し)
  - Gray 700: #374151 (本文)
  - Gray 400: #9CA3AF (補助テキスト)
  - Gray 100: #F3F4F6 (背景)
  - White: #FFFFFF

コントラスト比検証済み:
  - Gray 900 on White: 16.1:1 ✓
  - Gray 700 on White: 10.5:1 ✓
  - Primary on White: 4.7:1 ✓
  - Success on White: 3.4:1 (大文字のみ使用) ✓
```

### タイポグラフィ

```
フォントファミリー:
  - UI: "Segoe UI", "Noto Sans JP", sans-serif
  - 数値: "SF Mono", "Consolas", monospace

サイズスケール:
  - H1: 24px / 1.5rem (ページタイトル)
  - H2: 20px / 1.25rem (セクションタイトル)
  - H3: 18px / 1.125rem (サブセクション)
  - Body: 16px / 1rem (本文)
  - Small: 14px / 0.875rem (補助情報)
  - Caption: 12px / 0.75rem (キャプション)

行間:
  - 見出し: 1.2
  - 本文: 1.5
  - キャプション: 1.3

太さ:
  - Regular: 400 (本文)
  - Medium: 500 (強調)
  - Semibold: 600 (見出し)
  - Bold: 700 (重要な数値)
```

### スペーシング

```
8pxグリッドシステム:
  - 4px: 最小間隔（アイコンとテキスト）
  - 8px: デフォルト間隔（要素間）
  - 16px: セクション内の余白
  - 24px: セクション間の余白
  - 32px: ページ全体の余白
  - 48px: 大きな区切り
```

### アニメーション

```
トランジション:
  - 標準: 200ms ease-in-out
  - 長め: 300ms ease-in-out (モーダル)
  - 短め: 100ms ease-in-out (ホバー)

イージング:
  - ease-in-out: デフォルト
  - ease-out: 表示（フェードイン）
  - ease-in: 非表示（フェードアウト）

prefers-reduced-motion 対応:
  - アニメーション無効化
  - transition: none
  - 即座の状態変化
```

### レスポンシブブレークポイント

```
最小推奨サイズ: 1024x768

ブレークポイント:
  - Desktop Large: 1920px以上
  - Desktop: 1280px - 1919px
  - Laptop: 1024px - 1279px
  - Tablet: 768px - 1023px (非推奨、警告表示)
  - Mobile: 767px以下 (未対応、エラー表示)

各画面の最小幅:
  - ホーム: 800px
  - 監視: 1024px (グラフ表示のため)
  - 診断: 900px
```

---

## まとめ

本仕様書では、OBS配信最適化ツールの前半3画面（ホーム、監視、診断）について、以下の設計方針に基づいたワイヤーフレームを提供しました。

### 実装された設計原則

1. **3段階情報密度**: グランス→概要→詳細の切り替えにより、配信中と詳細分析の両方に対応
2. **配信中モード**: ワンクリックでコンパクト表示に切り替え、常時最前面表示が可能
3. **WCAG 2.1 AA準拠**: コントラスト比、キーボード操作、ARIAラベル、代替テキストを完備

### 次のステップ（後半仕様書で対応予定）

- 設定画面（アラート設定、表示カスタマイズ）
- プロファイル管理画面
- ヘルプ・オンボーディング画面
- システム設定・環境設定画面

### 実装時の注意点

1. **パフォーマンス**: グラフ更新は Canvas API を使用し、DOM操作を最小化
2. **状態管理**: React/Vue等のフレームワークで状態を一元管理
3. **データ取得**: WebSocket または SSE でリアルタイムデータを受信
4. **テスト**: スクリーンリーダー（NVDA、JAWS）での動作確認を必須化
---

## Part 2: レポート・オンボーディング・共通コンポーネント

---
- **グランス（Glance）**: 0.5秒で状態把握（色・アイコン）
- **概要（Overview）**: 3秒で全体像把握（カード・グラフ）
- **詳細（Detail）**: 必要時のみドリルダウン

### 配信中モード対応
- 最小限の画面占有
- 非侵入的な通知
- ワンクリック操作

### WCAG 2.1 AA準拠
- コントラスト比 4.5:1以上
- キーボード操作完全対応
- スクリーンリーダー対応

---

## 4. レポート画面（セッション履歴・分析）

### 4.1 メイン画面レイアウト

```
┌────────────────────────────────────────────────────────────────────────────┐
│ [←] セッションレポート                    [カード表示 ▼] [エクスポート...]   │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ ┌─ フィルター・期間選択 ─────────────────────────────────────────────────┐ │
│ │ [過去7日間 ▼]  [すべての状態 ▼]  [すべてのプロファイル ▼]  [適用]     │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│ ┌─ 統計サマリー ─────────────────────────────────────────────────────────┐ │
│ │  総配信時間        平均品質スコア      問題検出数      改善率          │ │
│ │  ██ 24h 32m       ██████ 8.2/10     ⚠ 12件        ↗ +15%           │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│ ┌─ セッション一覧（カード表示） ─────────────────────────────────────────┐ │
│ │                                                                        │ │
│ │ ┌──────────────────────┐  ┌──────────────────────┐  ┌──────────────┐ │ │
│ │ │ ● 2025-12-20 20:15   │  │ ● 2025-12-19 21:30   │  │ ● 2025-12-18 │ │ │
│ │ │   ゲーム実況配信     │  │   雑談配信           │  │   ゲーム配信 │ │ │
│ │ │                      │  │                      │  │              │ │ │
│ │ │ 継続時間: 2h 15m     │  │ 継続時間: 1h 05m     │  │ 継続時間: 3h │ │ │
│ │ │ プロファイル: Gaming │  │ プロファイル: Talk   │  │ プロファイル │ │ │
│ │ │                      │  │                      │  │              │ │ │
│ │ │ 品質スコア           │  │ 品質スコア           │  │ 品質スコア   │ │ │
│ │ │ ████████░░ 8.5/10    │  │ ███████░░░ 7.2/10    │  │ █████████░   │ │ │
│ │ │                      │  │                      │  │              │ │ │
│ │ │ 問題: 2件            │  │ 問題: 5件            │  │ 問題: 1件    │ │ │
│ │ │ ⚠ CPU高負荷 (3分)    │  │ ⚠ フレームドロップ   │  │ ⚠ ビットレー │ │ │
│ │ │ ℹ 音声レベル低       │  │ ⚠ 音声ノイズ         │  │              │ │ │
│ │ │                      │  │ ⚠ エンコード遅延     │  │ [詳細を見る] │ │ │
│ │ │ [詳細を見る]         │  │                      │  │              │ │ │
│ │ │                      │  │ [詳細を見る]         │  │              │ │ │
│ │ └──────────────────────┘  └──────────────────────┘  └──────────────┘ │ │
│ │                                                                        │ │
│ │ [さらに読み込む (18件)]                                                 │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 4.2 セッション詳細画面

```
┌────────────────────────────────────────────────────────────────────────────┐
│ [←戻る] セッション詳細 - 2025-12-20 20:15              [PDF出力] [共有...]  │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ ┌─ セッション情報 ───────────────────────────────────────────────────────┐ │
│ │ 配信名: ゲーム実況配信                                                  │ │
│ │ 開始: 2025-12-20 20:15:23    終了: 2025-12-20 22:30:45                │ │
│ │ 継続時間: 2時間15分22秒      プロファイル: Gaming 1080p60             │ │
│ │ 品質スコア: ████████░░ 8.5/10  (良好)                                  │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│ ┌─ パフォーマンスタイムライン ───────────────────────────────────────────┐ │
│ │                                                                        │ │
│ │  CPU使用率 (%)                                                         │ │
│ │  100 ┤                    ████                                         │ │
│ │   80 ┤                  ██    ██                                       │ │
│ │   60 ┤        ████    ██        ██                                     │ │
│ │   40 ┤      ██    ████            ████                                 │ │
│ │   20 ┤  ████                          ████                             │ │
│ │    0 └──┴────┴────┴────┴────┴────┴────┴────┴────┴────┴────            │ │
│ │      20:15  20:30  20:45  21:00  21:15  21:30  21:45  22:00  22:15    │ │
│ │                                                                        │ │
│ │      [CPU] [GPU] [メモリ] [ネットワーク] [フレーム] [エンコード]       │ │
│ │                                                                        │ │
│ │  ⚠ 問題箇所:                                                           │ │
│ │  │                                                                     │ │
│ │  └─ 20:45-20:48: CPU高負荷 (平均85%)                                  │ │
│ │     └─ 推奨: ゲーム設定を下げるか、エンコードプリセットを調整          │ │
│ │                                                                        │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│ ┌─ 検出された問題 (2件) ─────────────────────────────────────────────────┐ │
│ │                                                                        │ │
│ │ ⚠ 高優先度 (1件)                                                       │ │
│ │ ┌──────────────────────────────────────────────────────────────────┐   │ │
│ │ │ CPU高負荷                                    20:45:12 - 20:48:33 │   │ │
│ │ │                                                                  │   │ │
│ │ │ 影響: エンコード遅延が発生し、フレームドロップのリスクあり       │   │ │
│ │ │                                                                  │   │ │
│ │ │ 詳細: 平均CPU使用率 85% (推奨: 70%以下)                          │   │ │
│ │ │       ピーク時: 92%                                              │   │ │
│ │ │                                                                  │   │ │
│ │ │ 推奨アクション:                                                  │   │ │
│ │ │ □ ゲームのグラフィック設定を下げる                               │   │ │
│ │ │ □ エンコードプリセットを "faster" に変更                         │   │ │
│ │ │ □ 不要なバックグラウンドアプリを終了                             │   │ │
│ │ │                                                                  │   │ │
│ │ │ [タイムラインで表示] [詳細ログ]                                  │   │ │
│ │ └──────────────────────────────────────────────────────────────────┘   │ │
│ │                                                                        │ │
│ │ ℹ 低優先度 (1件)                                                       │ │
│ │ ┌──────────────────────────────────────────────────────────────────┐   │ │
│ │ │ 音声レベル低め                               21:15:00 - 21:18:45 │   │ │
│ │ │                                                                  │   │ │
│ │ │ 影響: 視聴者が音声を聞き取りにくい可能性                         │   │ │
│ │ │ 詳細: 平均レベル -18dB (推奨: -12dB ~ -6dB)                      │   │ │
│ │ │                                                                  │   │ │
│ │ │ [タイムラインで表示]                                             │   │ │
│ │ └──────────────────────────────────────────────────────────────────┘   │ │
│ │                                                                        │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│ ┌─ メトリクス統計 ───────────────────────────────────────────────────────┐ │
│ │                                                                        │ │
│ │ ┌─ CPU ──────┐ ┌─ GPU ──────┐ ┌─ メモリ ────┐ ┌─ ネットワーク ──┐   │ │
│ │ │ 平均: 62%   │ │ 平均: 75%   │ │ 平均: 8.2GB │ │ 平均: 6.2Mbps   │   │ │
│ │ │ 最大: 92%   │ │ 最大: 88%   │ │ 最大: 9.8GB │ │ 最大: 6.5Mbps   │   │ │
│ │ │ 最小: 35%   │ │ 最小: 45%   │ │ 最小: 7.1GB │ │ 最小: 5.8Mbps   │   │ │
│ │ └─────────────┘ └─────────────┘ └─────────────┘ └─────────────────┘   │ │
│ │                                                                        │ │
│ │ ┌─ フレーム ──────────┐ ┌─ エンコード ────────┐ ┌─ 音声 ──────────┐  │ │
│ │ │ ドロップ: 23 (0.2%) │ │ 平均遅延: 2.1ms     │ │ 平均レベル:-12dB│  │ │
│ │ │ スキップ: 5 (0.04%) │ │ 最大遅延: 15.3ms    │ │ ピーク: -3dB    │  │ │
│ │ │ レンダリング遅延:1ms│ │ キューサイズ:平均3  │ │ クリップ: 0回   │  │ │
│ │ └─────────────────────┘ └─────────────────────┘ └─────────────────┘  │ │
│ │                                                                        │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 4.3 リスト表示モード

```
┌────────────────────────────────────────────────────────────────────────────┐
│ [←] セッションレポート                    [リスト表示 ▼] [エクスポート...]   │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ ┌─ セッション一覧 ───────────────────────────────────────────────────────┐ │
│ │                                                                        │ │
│ │ 日時              タイトル          時間    品質   問題  プロファイル  │ │
│ │ ────────────────────────────────────────────────────────────────────   │ │
│ │ ● 12/20 20:15    ゲーム実況配信    2:15    8.5    2件   Gaming       │ │
│ │                                                                        │ │
│ │ ● 12/19 21:30    雑談配信          1:05    7.2    5件   Talk         │ │
│ │                                                                        │ │
│ │ ● 12/18 19:00    ゲーム配信        3:22    9.1    1件   Gaming       │ │
│ │                                                                        │ │
│ │ ● 12/17 20:00    歌配信            1:45    8.8    0件   Music        │ │
│ │                                                                        │ │
│ │ ● 12/16 22:00    深夜雑談          2:00    7.5    3件   Talk         │ │
│ │                                                                        │ │
│ │ ● 12/15 18:30    ゲーム配信        4:10    8.2    2件   Gaming       │ │
│ │                                                                        │ │
│ │ [さらに読み込む (15件)]                                                 │ │
│ │                                                                        │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 4.4 改善推移グラフ

```
┌────────────────────────────────────────────────────────────────────────────┐
│ ┌─ 品質スコア推移（30日間） ─────────────────────────────────────────────┐ │
│ │                                                                        │ │
│ │  10.0 ┤                                               ●               │ │
│ │   9.0 ┤                                       ●   ●       ●           │ │
│ │   8.0 ┤                   ●       ●   ●   ●                   ●       │ │
│ │   7.0 ┤       ●   ●   ●                                               │ │
│ │   6.0 ┤   ●                                                           │ │
│ │   5.0 ┤                                                               │ │
│ │       └───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───   │ │
│ │       11/20   11/27   12/04   12/11   12/18                          │ │
│ │                                                                        │ │
│ │  トレンド: ↗ +1.8ポイント改善   目標達成率: 85%                        │ │
│ │                                                                        │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│ ┌─ 問題発生数推移 ───────────────────────────────────────────────────────┐ │
│ │                                                                        │ │
│ │  20 ┤  ██                                                             │ │
│ │  15 ┤  ██  ██                                                         │ │
│ │  10 ┤  ██  ██      ██  ██                                             │ │
│ │   5 ┤  ██  ██  ██  ██  ██  ██      ██      ██                         │ │
│ │   0 ┴──┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───       │ │
│ │       11/20   11/27   12/04   12/11   12/18                          │ │
│ │                                                                        │ │
│ │  ⚠ Critical: ██  ⚠ Warning: ██  ℹ Info: ██                            │ │
│ │                                                                        │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 4.5 配置理由

**カード表示 vs リスト表示**
- カード: 視覚的に情報を素早く把握（グランスレベル）
- リスト: 多数のセッションを効率的に比較（概要レベル）
- ユーザーが用途に応じて切り替え可能

**タイムライン表示**
- 時系列での問題把握が容易
- 問題箇所の視覚的ハイライト
- グラフ上でホバー/クリックで詳細表示

**統計サマリー**
- 画面上部に配置（F字パターン）
- 4つの重要指標を水平配置
- アイコンと数値で即座に理解可能

**改善推移グラフ**
- ユーザーのモチベーション向上
- 長期的な品質改善を可視化
- ポジティブフィードバックループ

### 4.6 キーボード操作

| キー | 動作 |
|------|------|
| Tab / Shift+Tab | セッションカード/リスト項目間の移動 |
| Enter / Space | セッション詳細を開く |
| ← → | カード表示時の横スクロール |
| ↑ ↓ | リスト表示時の項目移動 |
| Ctrl+E | エクスポート |
| Ctrl+F | フィルター設定にフォーカス |
| Ctrl+1 / Ctrl+2 | カード/リスト表示切り替え |
| Esc | 詳細画面から一覧に戻る |

### 4.7 アクセシビリティ注記

**スクリーンリーダー対応**
```html
<article role="article" aria-label="配信セッション 2025年12月20日 20時15分">
  <h3>ゲーム実況配信</h3>
  <dl>
    <dt>継続時間</dt><dd>2時間15分</dd>
    <dt>品質スコア</dt><dd>10点満点中8.5点 良好</dd>
    <dt>問題件数</dt><dd>2件 CPU高負荷、音声レベル低</dd>
  </dl>
  <button aria-label="セッション詳細を表示">詳細を見る</button>
</article>
```

**グラフのアクセシビリティ**
- SVGグラフに`role="img"`とラベル付与
- データテーブル形式での代替表示オプション
- 数値データをテキストでも提供

**色覚多様性対応**
- 問題レベルを色+アイコンで区別
- グラフは色+パターンで区別
- コントラスト比 4.5:1以上

**フォーカスインジケーター**
- 青色の2pxアウトライン
- カード全体がフォーカス範囲
- 現在位置を明確に表示

---

## 5. オンボーディング画面（初回セットアップ）

### 5.1 ウェルカム画面（ステップ 0/7）

```
┌────────────────────────────────────────────────────────────────────────────┐
│                                                                            │
│                                                                            │
│                          ┌───────────────────┐                             │
│                          │                   │                             │
│                          │   [OBSロゴ画像]   │                             │
│                          │                   │                             │
│                          └───────────────────┘                             │
│                                                                            │
│                     OBS配信最適化ツールへようこそ                           │
│                                                                            │
│              より快適で高品質な配信を実現するための                         │
│                    セットアップを開始しましょう                             │
│                                                                            │
│                                                                            │
│                    所要時間: 約5分   7つのステップ                          │
│                                                                            │
│                                                                            │
│              ┌──────────────────────────────────────┐                      │
│              │                                      │                      │
│              │      [セットアップを始める]          │                      │
│              │                                      │                      │
│              └──────────────────────────────────────┘                      │
│                                                                            │
│                      [後でセットアップする]                                 │
│                                                                            │
│                                                                            │
│                 □ 次回からこの画面を表示しない                              │
│                                                                            │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 5.2 ステップ1: OBS接続設定（1/7）

```
┌────────────────────────────────────────────────────────────────────────────┐
│ OBS配信最適化ツール - 初期セットアップ                      [最小化] [×]   │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ ┌─ 進捗インジケーター ───────────────────────────────────────────────────┐ │
│ │  ●━━━○━━━○━━━○━━━○━━━○━━━○                                            │ │
│ │  1   2   3   4   5   6   7                                             │ │
│ │  接続 監視 プロ 通知 目標 最適 完了                                     │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│                                                                            │
│  ステップ 1: OBS WebSocketに接続                                           │
│  ─────────────────────────────────────────────                             │
│                                                                            │
│  OBSのパフォーマンスをリアルタイムで監視するため、                          │
│  WebSocket接続を設定します。                                               │
│                                                                            │
│                                                                            │
│  ┌─ 接続設定 ─────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  サーバーアドレス                                                    │   │
│  │  ┌────────────────────────────────────────────────────────────┐     │   │
│  │  │ localhost                                              [▼] │     │   │
│  │  └────────────────────────────────────────────────────────────┘     │   │
│  │                                                                      │   │
│  │  ポート番号                                                          │   │
│  │  ┌─────────────┐                                                    │   │
│  │  │ 4455        │                                                    │   │
│  │  └─────────────┘                                                    │   │
│  │                                                                      │   │
│  │  パスワード                                                          │   │
│  │  ┌────────────────────────────────────────────────────────────┐     │   │
│  │  │ ●●●●●●●●●●●●                                    [表示]    │     │   │
│  │  └────────────────────────────────────────────────────────────┘     │   │
│  │                                                                      │   │
│  │  □ パスワードを保存する（推奨）                                      │   │
│  │                                                                      │   │
│  │  ┌────────────────────────┐                                         │   │
│  │  │  [接続テスト]          │                                         │   │
│  │  └────────────────────────┘                                         │   │
│  │                                                                      │   │
│  │  状態: ● 未接続                                                      │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌─ ヘルプ ───────────────────────────────────────────────────────────┐   │
│  │  ℹ OBS WebSocketの設定方法:                                         │   │
│  │                                                                      │   │
│  │  1. OBSを起動                                                        │   │
│  │  2. 「ツール」→「WebSocketサーバー設定」を開く                       │   │
│  │  3. 「WebSocketサーバーを有効にする」にチェック                      │   │
│  │  4. ポート番号とパスワードを確認                                     │   │
│  │                                                                      │   │
│  │  [詳しい手順を見る]                                                  │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│                                                                            │
│                                              [スキップ] [← 戻る] [次へ →] │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 5.3 ステップ2: 監視項目選択（2/7）

```
┌────────────────────────────────────────────────────────────────────────────┐
│ OBS配信最適化ツール - 初期セットアップ                      [最小化] [×]   │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ ┌─ 進捗インジケーター ───────────────────────────────────────────────────┐ │
│ │  ●━━━●━━━○━━━○━━━○━━━○━━━○                                            │ │
│ │  1   2   3   4   5   6   7                                             │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│                                                                            │
│  ステップ 2: 監視項目を選択                                                │
│  ─────────────────────────────────────                                     │
│                                                                            │
│  配信中に監視する項目を選択してください。                                   │
│  すべての項目を有効にすることを推奨します。                                 │
│                                                                            │
│                                                                            │
│  ┌─ システムリソース監視 ─────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  ☑ CPU使用率                                       [推奨]            │   │
│  │    配信中のCPU負荷を監視し、高負荷時に警告します                      │   │
│  │                                                                      │   │
│  │  ☑ GPU使用率                                       [推奨]            │   │
│  │    グラフィックボードの使用率を監視します                             │   │
│  │                                                                      │   │
│  │  ☑ メモリ使用量                                    [推奨]            │   │
│  │    メモリ不足による問題を事前に検出します                             │   │
│  │                                                                      │   │
│  │  ☑ ディスクI/O                                                       │   │
│  │    録画時のディスク書き込み速度を監視します                           │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌─ 配信品質監視 ─────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  ☑ フレームドロップ                                [推奨]            │   │
│  │    フレーム欠落を検出し、品質低下を防ぎます                           │   │
│  │                                                                      │   │
│  │  ☑ エンコード遅延                                  [推奨]            │   │
│  │    エンコード処理の遅延を監視します                                   │   │
│  │                                                                      │   │
│  │  ☑ ネットワーク品質                                [推奨]            │   │
│  │    ビットレート、パケットロス、RTTを監視します                        │   │
│  │                                                                      │   │
│  │  ☑ 音声レベル                                                        │   │
│  │    音声が小さすぎる/大きすぎる場合に警告します                        │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│                                                                            │
│  [すべて選択] [推奨設定を適用] [すべて解除]                                 │
│                                                                            │
│                                              [スキップ] [← 戻る] [次へ →] │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 5.4 ステップ3: プロファイル作成（3/7）

```
┌────────────────────────────────────────────────────────────────────────────┐
│ OBS配信最適化ツール - 初期セットアップ                      [最小化] [×]   │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ ┌─ 進捗インジケーター ───────────────────────────────────────────────────┐ │
│ │  ●━━━●━━━●━━━○━━━○━━━○━━━○                                            │ │
│ │  1   2   3   4   5   6   7                                             │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│                                                                            │
│  ステップ 3: 最初のプロファイルを作成                                       │
│  ───────────────────────────────────────────                               │
│                                                                            │
│  配信スタイルに応じた監視プロファイルを作成します。                         │
│  テンプレートを選択するか、カスタム設定を行えます。                         │
│                                                                            │
│                                                                            │
│  ┌─ テンプレート選択 ─────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐        │   │
│  │  │ ◉ ゲーム配信   │  │ ○ 雑談・作業   │  │ ○ カスタム     │        │   │
│  │  │                │  │                │  │                │        │   │
│  │  │ 高負荷に対応   │  │ 安定性重視     │  │ 手動設定       │        │   │
│  │  └────────────────┘  └────────────────┘  └────────────────┘        │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌─ プロファイル設定 ─────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  プロファイル名                                                      │   │
│  │  ┌────────────────────────────────────────────────────────────┐     │   │
│  │  │ ゲーム配信                                                 │     │   │
│  │  └────────────────────────────────────────────────────────────┘     │   │
│  │                                                                      │   │
│  │  説明（任意）                                                        │   │
│  │  ┌────────────────────────────────────────────────────────────┐     │   │
│  │  │ Apex Legends、VALORANTなどの高負荷ゲーム配信用             │     │   │
│  │  └────────────────────────────────────────────────────────────┘     │   │
│  │                                                                      │   │
│  │  しきい値設定                                                        │   │
│  │  ┌──────────────────────────────────────────────────────────┐       │   │
│  │  │  CPU使用率警告    [▓▓▓▓▓▓▓░░░] 70%                       │       │   │
│  │  │  GPU使用率警告    [▓▓▓▓▓▓▓▓░░] 80%                       │       │   │
│  │  │  メモリ警告       [▓▓▓▓▓▓▓▓░░] 80%                       │       │   │
│  │  │  FPS低下警告      [▓▓▓▓▓▓▓░░░] 55fps                     │       │   │
│  │  │  エンコード遅延   [▓▓░░░░░░░░] 10ms                      │       │   │
│  │  └──────────────────────────────────────────────────────────┘       │   │
│  │                                                                      │   │
│  │  [詳細設定...]                                                       │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌─ プレビュー ───────────────────────────────────────────────────────┐   │
│  │  このプロファイルでは以下の条件で警告が発生します:                    │   │
│  │  • CPU使用率が70%を超えた場合                                       │   │
│  │  • FPSが55以下に低下した場合                                        │   │
│  │  • エンコード遅延が10ms以上になった場合                             │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│                                              [スキップ] [← 戻る] [次へ →] │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 5.5 ステップ4: 通知設定（4/7）

```
┌────────────────────────────────────────────────────────────────────────────┐
│ OBS配信最適化ツール - 初期セットアップ                      [最小化] [×]   │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ ┌─ 進捗インジケーター ───────────────────────────────────────────────────┐ │
│ │  ●━━━●━━━●━━━●━━━○━━━○━━━○                                            │ │
│ │  1   2   3   4   5   6   7                                             │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│                                                                            │
│  ステップ 4: 通知の設定                                                    │
│  ─────────────────────────────                                             │
│                                                                            │
│  問題発生時の通知方法を設定します。                                         │
│  配信中でも気づきやすい方法を選択してください。                             │
│                                                                            │
│                                                                            │
│  ┌─ 通知方法 ─────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  ☑ デスクトップ通知                                   [推奨]         │   │
│  │    Windowsの通知機能を使用します                                     │   │
│  │                                                                      │   │
│  │  ☑ トーストメッセージ                                 [推奨]         │   │
│  │    画面右下に小さなメッセージを表示します                             │   │
│  │                                                                      │   │
│  │  ☑ システムトレイアイコン変化                         [推奨]         │   │
│  │    トレイアイコンの色で状態を表示します                               │   │
│  │                                                                      │   │
│  │  □ 音声アラート                                                      │   │
│  │    重大な問題発生時に音で知らせます                                   │   │
│  │                                                                      │   │
│  │  □ ブラウザソース連携                                                │   │
│  │    OBS内のブラウザソースに警告を表示します                            │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌─ 通知レベル設定 ───────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  どのレベルの問題から通知しますか？                                  │   │
│  │                                                                      │   │
│  │  ◉ Critical + Warning + Info                       [推奨]           │   │
│  │    すべての問題を通知（学習段階に最適）                               │   │
│  │                                                                      │   │
│  │  ○ Critical + Warning のみ                                           │   │
│  │    重要な問題のみ通知（慣れてきたら）                                 │   │
│  │                                                                      │   │
│  │  ○ Critical のみ                                                     │   │
│  │    緊急の問題のみ通知（上級者向け）                                   │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌─ 配信中モード ─────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  配信中の通知表示方法                                                │   │
│  │                                                                      │   │
│  │  ◉ 控えめに表示                                     [推奨]           │   │
│  │    小さく、自動的に消える通知                                         │   │
│  │                                                                      │   │
│  │  ○ 通常表示                                                          │   │
│  │    通常サイズで表示                                                   │   │
│  │                                                                      │   │
│  │  ○ 通知を無効化                                                      │   │
│  │    配信中は一切通知しない（非推奨）                                   │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  [通知をテスト]  ← 設定を確認できます                                      │
│                                                                            │
│                                              [スキップ] [← 戻る] [次へ →] │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 5.6 ステップ5: 目標設定（5/7）

```
┌────────────────────────────────────────────────────────────────────────────┐
│ OBS配信最適化ツール - 初期セットアップ                      [最小化] [×]   │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ ┌─ 進捗インジケーター ───────────────────────────────────────────────────┐ │
│ │  ●━━━●━━━●━━━●━━━●━━━○━━━○                                            │ │
│ │  1   2   3   4   5   6   7                                             │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│                                                                            │
│  ステップ 5: 配信品質の目標設定                                            │
│  ─────────────────────────────────────                                     │
│                                                                            │
│  目指す配信品質を設定します。                                               │
│  この設定により、最適な推奨事項を提供できます。                             │
│                                                                            │
│                                                                            │
│  ┌─ 配信品質目標 ─────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  ◉ バランス重視                                     [推奨]           │   │
│  │    品質と安定性のバランスを取ります                                   │   │
│  │    • フレームドロップ < 0.5%                                         │   │
│  │    • CPU使用率 < 75%                                                 │   │
│  │    • エンコード遅延 < 10ms                                           │   │
│  │                                                                      │   │
│  │  ○ 最高品質優先                                                      │   │
│  │    可能な限り高品質な配信を目指します                                 │   │
│  │    • フレームドロップ < 0.1%                                         │   │
│  │    • CPU使用率 < 85%（高負荷を許容）                                 │   │
│  │    • エンコード遅延 < 5ms                                            │   │
│  │                                                                      │   │
│  │  ○ 安定性優先                                                        │   │
│  │    安定した配信を最優先します                                         │   │
│  │    • フレームドロップ < 1%（余裕を持たせる）                          │   │
│  │    • CPU使用率 < 60%                                                 │   │
│  │    • エンコード遅延 < 20ms                                           │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌─ 配信スタイル ─────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  主な配信内容を選択してください（複数選択可）                         │   │
│  │                                                                      │   │
│  │  ☑ ゲーム配信（FPS・アクション）                                     │   │
│  │  □ ゲーム配信（RPG・シミュレーション）                               │   │
│  │  ☑ 雑談・作業配信                                                    │   │
│  │  □ 歌・演奏配信                                                      │   │
│  │  □ お絵かき配信                                                      │   │
│  │  □ その他                                                            │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌─ 配信頻度 ─────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  どのくらいの頻度で配信しますか？                                     │   │
│  │                                                                      │   │
│  │  ◉ 週2〜3回                                                          │   │
│  │  ○ 週4〜5回                                                          │   │
│  │  ○ ほぼ毎日                                                          │   │
│  │  ○ 不定期                                                            │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ℹ これらの設定は後から変更できます                                        │
│                                                                            │
│                                              [スキップ] [← 戻る] [次へ →] │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 5.7 ステップ6: 自動最適化（6/7）

```
┌────────────────────────────────────────────────────────────────────────────┐
│ OBS配信最適化ツール - 初期セットアップ                      [最小化] [×]   │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ ┌─ 進捗インジケーター ───────────────────────────────────────────────────┐ │
│ │  ●━━━●━━━●━━━●━━━●━━━●━━━○                                            │ │
│ │  1   2   3   4   5   6   7                                             │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│                                                                            │
│  ステップ 6: 推奨設定の自動適用                                            │
│  ─────────────────────────────────────                                     │
│                                                                            │
│  環境分析の結果、以下の設定変更を推奨します。                               │
│  チェックを入れた項目がOBSに自動適用されます。                              │
│                                                                            │
│                                                                            │
│  ┌─ 推奨設定一覧 ─────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  変更項目                    現在値         →      推奨値           │   │
│  │  ─────────────────────────────────────────────────────────────────  │   │
│  │  ☑ ビットレート              3,000 kbps     →      6,000 kbps      │   │
│  │    └ 回線速度に余裕があり、より高画質な配信が可能です                │   │
│  │                                                                      │   │
│  │  ☑ エンコーダー              x264 (CPU)     →      NVENC (GPU)     │   │
│  │    └ GPUエンコードで CPU負荷を大幅に軽減できます                     │   │
│  │                                                                      │   │
│  │  ☑ エンコーダープリセット    veryfast       →      quality         │   │
│  │    └ GPU性能に余裕があり、より高品質な圧縮が可能です                 │   │
│  │                                                                      │   │
│  │  ☑ キーフレーム間隔          0秒（自動）    →      2秒              │   │
│  │    └ 配信プラットフォームの推奨値に合わせます                        │   │
│  │                                                                      │   │
│  │  ☐ 出力解像度                1920x1080      →      1920x1080       │   │
│  │    └ 現在の設定が最適です（変更不要）                                │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌─ 適用効果の予測 ───────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  ⚡ 品質スコア:  65点  ━━━━━━━━━▶  92点   (+27点 向上)             │   │
│  │                                                                      │   │
│  │  改善ポイント:                                                       │   │
│  │  • 画質が大幅に向上します                                            │   │
│  │  • CPU負荷が軽減され、ゲームがより快適に動作します                   │   │
│  │  • 配信の安定性が向上します                                          │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌─ 安全機能 ─────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  ✓ 現在の設定は自動でバックアップされます                            │   │
│  │  ✓ いつでも「元に戻す」ボタンで復元できます                          │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ℹ 適用する項目は個別に選択/解除できます                                   │
│                                                                            │
│                           [すべて適用] [選択項目のみ適用] [スキップ →]     │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

**自動最適化画面の状態バリエーション:**

| 状態 | 表示内容 |
|------|----------|
| 分析中 | プログレスバー + 「設定を分析しています...」 |
| 変更なし | 「現在の設定は最適です！」+ 直接完了へ |
| 適用中 | 各項目にスピナー表示 + 「適用しています...」 |
| 適用完了 | チェックマーク + 「設定を適用しました」 |
| エラー | エラー項目を赤表示 + 「一部の設定を適用できませんでした」 |

### 5.8 ステップ7: セットアップ完了（7/7）

```
┌────────────────────────────────────────────────────────────────────────────┐
│ OBS配信最適化ツール - 初期セットアップ                      [最小化] [×]   │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ ┌─ 進捗インジケーター ───────────────────────────────────────────────────┐ │
│ │  ●━━━●━━━●━━━●━━━●━━━●━━━●                                            │ │
│ │  1   2   3   4   5   6   7                                             │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│                                                                            │
│                          ┌───────────────────┐                             │
│                          │                   │                             │
│                          │   [チェックマーク] │                             │
│                          │                   │                             │
│                          └───────────────────┘                             │
│                                                                            │
│                     セットアップが完了しました！                            │
│                                                                            │
│              これで配信の品質監視を開始できます                             │
│                                                                            │
│                                                                            │
│  ┌─ 設定内容の確認 ───────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  ✓ OBS WebSocket接続       localhost:4455                           │   │
│  │  ✓ 監視項目                8項目を有効化                             │   │
│  │  ✓ プロファイル            「ゲーム配信」を作成                       │   │
│  │  ✓ 通知設定                デスクトップ通知、トースト有効             │   │
│  │  ✓ 品質目標                バランス重視                              │   │
│  │  ✓ 自動最適化              4項目の設定を適用済み                     │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌─ 次のステップ ─────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  1. OBSを起動してください                                            │   │
│  │  2. 配信または録画を開始すると、自動的に監視が始まります              │   │
│  │  3. ダッシュボードでリアルタイム状態を確認できます                    │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌─ 役立つリソース ───────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  □ クイックスタートガイドを表示                                      │   │
│  │  □ サンプル配信で動作確認                                            │   │
│  │  □ チュートリアル動画を見る                                          │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│                                                                            │
│              ┌──────────────────────────────────────┐                      │
│              │                                      │                      │
│              │      [ダッシュボードを開く]          │                      │
│              │                                      │                      │
│              └──────────────────────────────────────┘                      │
│                                                                            │
│                         [← 戻る]  [後で]                                   │
│                                                                            │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 5.8 配置理由

**ウィザード形式の採用**
- 段階的な情報提示で認知負荷を軽減
- 1画面1タスクの原則
- 明確な進捗表示でゴールを可視化

**進捗インジケーター**
- 常に画面上部に固定
- 現在位置とステップ名を同時表示
- あと何ステップかが一目で分かる

**スキップ機能**
- すべてのステップでスキップ可能
- 後から設定変更できることを明示
- 上級者はすぐに使い始められる

**ヘルプの即時表示**
- 各ステップに関連ヘルプを配置
- 外部リンクは最小限に
- 画面内で完結する説明

**テンプレート提供**
- よくある使い方を想定
- カスタマイズも可能
- 初心者でも適切な設定が可能

### 5.9 キーボード操作

| キー | 動作 |
|------|------|
| Tab / Shift+Tab | フォーム項目間の移動 |
| Enter | 「次へ」ボタンを実行 |
| Esc | セットアップをキャンセル（確認ダイアログ表示） |
| Alt+← | 前のステップに戻る |
| Alt+→ | 次のステップに進む |
| Alt+S | スキップ |
| Space | チェックボックス/ラジオボタンの切り替え |
| ↑ ↓ | ラジオボタン選択の移動 |

### 5.10 アクセシビリティ注記

**進捗の明確化**
```html
<nav aria-label="セットアップ進捗">
  <ol>
    <li aria-current="step">ステップ1: OBS接続設定</li>
    <li>ステップ2: 監視項目選択</li>
    <!-- ... -->
  </ol>
</nav>
```

**フォームのラベル付け**
- すべての入力欄に明示的なラベル
- プレースホルダーはヒントとして使用（ラベルの代替にしない）
- エラーメッセージはフィールドに関連付け

**ヘルプテキストの提供**
- aria-describedbyで補足説明を関連付け
- ツールチップは必須情報に使わない
- 重要な説明は常に表示

**スクリーンリーダー対応**
- ステップ変更時にページタイトルをアナウンス
- 完了状態を明確に伝える
- エラー発生時は即座に通知

---

## 6. 共通コンポーネント

### 6.1 システムトレイ

#### 6.1.1 トレイアイコン（3色状態表示）

```
通常時（アイドル）:
  ┌─────┐
  │ ● ○ │  灰色アイコン
  │ ○   │  OBS未起動または監視停止中
  └─────┘

良好（緑）:
  ┌─────┐
  │ ● ● │  緑色アイコン
  │ ●   │  すべて正常
  └─────┘

警告（黄）:
  ┌─────┐
  │ ● ● │  黄色アイコン
  │ ●!  │  軽度の問題あり
  └─────┘

危険（赤）:
  ┌─────┐
  │ ● ● │  赤色アイコン
  │ ●!! │  重大な問題あり
  └─────┘
```

#### 6.1.2 コンテキストメニュー

```
┌────────────────────────────────────────┐
│ OBS配信最適化ツール                    │
├────────────────────────────────────────┤
│ ● 状態: 良好                           │
│                                        │
│ 配信時間: 1:23:45                      │
│ CPU: 62%  GPU: 71%                     │
├────────────────────────────────────────┤
│ ▶ ダッシュボードを開く                 │
│                                        │
│ ⚙ 設定                                 │
│                                        │
│ 📊 レポート                            │
│                                        │
│ 💡 プロファイル                        │
│   ├─ ○ ゲーム配信                      │
│   ├─ ● 雑談配信                        │
│   └─ ○ 歌配信                          │
│                                        │
│ 📌 常に最前面表示         [ON]         │
│                                        │
│ 🔕 通知を一時停止（1時間）             │
├────────────────────────────────────────┤
│ ヘルプとサポート                        │
│                                        │
│ 終了                                   │
└────────────────────────────────────────┘
```

#### 6.1.3 ミニステータス表示（ホバー時）

```
┌─────────────────────────────┐
│ OBS配信最適化ツール         │
├─────────────────────────────┤
│ ● 状態: 良好                │
│                             │
│ CPU    ████░░░░░░  62%      │
│ GPU    ███████░░░  71%      │
│ MEM    █████░░░░░  48%      │
│ NET    ██████████  6.2Mbps  │
│                             │
│ 問題: なし                  │
│                             │
│ クリックで詳細を表示        │
└─────────────────────────────┘
```

### 6.2 コンパクトビュー（PiP: Picture in Picture）

```
┌──────────────────────────────────┐ ─┐
│ OBS最適化 - コンパクト    [□][×] │  │ ドラッグバー
├──────────────────────────────────┤ ─┘
│                                  │
│  ● 良好                          │
│                                  │
│  CPU  ████░░  62%                │
│  GPU  ██████  71%                │
│  NET  6.2Mbps                    │
│                                  │
│  問題: なし                      │
│                                  │
│  ┌──────────────────────┐        │
│  │  [詳細を表示]        │        │
│  └──────────────────────┘        │
│                                  │
└──────────────────────────────────┘

展開時:
┌──────────────────────────────────┐
│ OBS最適化 - コンパクト    [□][×] │
├──────────────────────────────────┤
│                                  │
│  ● 良好    配信時間: 1:23:45     │
│                                  │
│  CPU  ████░░  62%  平均: 58%     │
│  GPU  ██████  71%  平均: 68%     │
│  MEM  ████░░  48%  空き: 8.2GB   │
│  NET  6.2Mbps      RTT: 12ms     │
│                                  │
│  FPS: 60 (0% drop)               │
│  エンコード遅延: 2ms              │
│                                  │
│  問題: なし                      │
│                                  │
│  [プロファイル: ゲーム配信 ▼]    │
│                                  │
│  ┌──────┐ ┌──────┐ ┌──────┐     │
│  │ 詳細 │ │ 通知 │ │ 設定 │     │
│  └──────┘ └──────┘ └──────┘     │
│                                  │
└──────────────────────────────────┘
```

### 6.3 通知トースト

#### 6.3.1 Critical（緊急）

```
┌────────────────────────────────────────────┐
│ ⛔ 緊急: CPU過負荷                    [×]  │
├────────────────────────────────────────────┤
│                                            │
│ CPU使用率が90%を超えています               │
│ フレームドロップが発生する可能性があります │
│                                            │
│ ┌──────────────┐  ┌──────────────────┐    │
│ │ 詳細を見る   │  │ 最適化を実行     │    │
│ └──────────────┘  └──────────────────┘    │
│                                            │
│ 5秒後に閉じます                            │
└────────────────────────────────────────────┘

配色: 赤背景 (#FEE2E2) / 赤枠 (#DC2626) / 黒文字
音声: アラート音（オプション）
自動消去: 30秒（アクションがない場合）
```

#### 6.3.2 Warning（警告）

```
┌────────────────────────────────────────────┐
│ ⚠ 警告: フレームドロップ検出         [×]  │
├────────────────────────────────────────────┤
│                                            │
│ 過去5分間で15フレームがドロップしました    │
│                                            │
│ ┌──────────────┐  ┌──────────────────┐    │
│ │ 詳細を見る   │  │ 設定を調整       │    │
│ └──────────────┘  └──────────────────┘    │
│                                            │
└────────────────────────────────────────────┘

配色: 黄背景 (#FEF3C7) / 黄枠 (#F59E0B) / 黒文字
自動消去: 10秒
```

#### 6.3.3 Info（情報）

```
┌────────────────────────────────────────────┐
│ ℹ 情報: プロファイル切り替え         [×]  │
├────────────────────────────────────────────┤
│                                            │
│ 「ゲーム配信」プロファイルを適用しました   │
│                                            │
│ ┌──────────────┐                           │
│ │ 元に戻す     │                           │
│ └──────────────┘                           │
│                                            │
└────────────────────────────────────────────┘

配色: 青背景 (#DBEAFE) / 青枠 (#3B82F6) / 黒文字
自動消去: 5秒
```

#### 6.3.4 Tips（ヒント）

```
┌────────────────────────────────────────────┐
│ 💡 ヒント: パフォーマンス改善         [×]  │
├────────────────────────────────────────────┤
│                                            │
│ エンコードプリセットを "faster" に変更す  │
│ ると、CPU使用率を約10%削減できます        │
│                                            │
│ ┌──────────────┐  ┌──────────────────┐    │
│ │ 適用する     │  │ 詳しく見る       │    │
│ └──────────────┘  └──────────────────┘    │
│                                            │
│ □ 今後このヒントを表示しない              │
│                                            │
└────────────────────────────────────────────┘

配色: 緑背景 (#D1FAE5) / 緑枠 (#10B981) / 黒文字
自動消去: 15秒
```

#### 6.3.5 配信中モード（控えめ表示）

```
┌─────────────────────────────────┐
│ ⚠ CPU高負荷              [×]   │
│ 90% - フレームドロップの危険    │
│ [詳細]                         │
└─────────────────────────────────┘

サイズ: 通常の70%
位置: 画面右下（OBS画面と干渉しない位置）
透明度: 90%
自動消去: 通常より短い（3秒）
```

### 6.4 設定画面

#### 6.4.1 タブ構成

```
┌────────────────────────────────────────────────────────────────────────────┐
│ 設定                                                         [保存] [×]    │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ ┌─ タブ ─────────────────────────────────────────────────────────────────┐ │
│ │ [一般] [監視] [プロファイル] [通知] [表示] [詳細設定]                    │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│ ┌─ 一般設定 ─────────────────────────────────────────────────────────────┐ │
│ │                                                                        │ │
│ │ ┌─ 起動設定 ─────────────────────────────────────────────────────┐     │ │
│ │ │                                                                │     │ │
│ │ │ ☑ Windowsスタートアップ時に自動起動                            │     │ │
│ │ │ ☑ 起動時にシステムトレイに最小化                               │     │ │
│ │ │ □ OBS起動時に自動的に監視開始                                  │     │ │
│ │ │                                                                │     │ │
│ │ └────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                        │ │
│ │ ┌─ OBS WebSocket接続 ────────────────────────────────────────────┐     │ │
│ │ │                                                                │     │ │
│ │ │ サーバーアドレス                                               │     │ │
│ │ │ ┌──────────────────────────────────────────────────────┐       │     │ │
│ │ │ │ localhost                                        [▼] │       │     │ │
│ │ │ └──────────────────────────────────────────────────────┘       │     │ │
│ │ │                                                                │     │ │
│ │ │ ポート: [4455]  パスワード: [●●●●●●●●]  [接続テスト]           │     │ │
│ │ │                                                                │     │ │
│ │ │ 状態: ● 接続済み  最終接続: 2025-12-20 14:32:15               │     │ │
│ │ │                                                                │     │ │
│ │ └────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                        │ │
│ │ ┌─ 言語とリージョン ─────────────────────────────────────────────┐     │ │
│ │ │                                                                │     │ │
│ │ │ 言語: [日本語 ▼]                                               │     │ │
│ │ │ タイムゾーン: [Asia/Tokyo ▼]                                   │     │ │
│ │ │ 日付形式: [YYYY-MM-DD ▼]                                       │     │ │
│ │ │                                                                │     │ │
│ │ └────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                        │ │
│ │ ┌─ データ管理 ───────────────────────────────────────────────────┐     │ │
│ │ │                                                                │     │ │
│ │ │ セッションログの保持期間: [30日間 ▼]                          │     │ │
│ │ │                                                                │     │ │
│ │ │ 現在のデータサイズ: 245 MB                                     │     │ │
│ │ │                                                                │     │ │
│ │ │ [古いログをクリア...] [データをエクスポート...]                │     │ │
│ │ │                                                                │     │ │
│ │ └────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                        │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│                                                   [デフォルトに戻す] [適用] │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

#### 6.4.2 監視設定タブ

```
│ ┌─ 監視設定 ─────────────────────────────────────────────────────────────┐ │
│ │                                                                        │ │
│ │ ┌─ 監視項目 ─────────────────────────────────────────────────────┐     │ │
│ │ │                                                                │     │ │
│ │ │ システムリソース                                               │     │ │
│ │ │ ☑ CPU使用率         更新間隔: [1秒 ▼]                         │     │ │
│ │ │ ☑ GPU使用率         更新間隔: [1秒 ▼]                         │     │ │
│ │ │ ☑ メモリ使用量      更新間隔: [2秒 ▼]                         │     │ │
│ │ │ ☑ ディスクI/O       更新間隔: [2秒 ▼]                         │     │ │
│ │ │                                                                │     │ │
│ │ │ 配信品質                                                       │     │ │
│ │ │ ☑ フレームレート/ドロップ   更新間隔: [0.5秒 ▼]               │     │ │
│ │ │ ☑ エンコード性能            更新間隔: [1秒 ▼]                 │     │ │
│ │ │ ☑ ネットワーク品質          更新間隔: [1秒 ▼]                 │     │ │
│ │ │ ☑ 音声レベル                更新間隔: [0.5秒 ▼]               │     │ │
│ │ │                                                                │     │ │
│ │ └────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                        │ │
│ │ ┌─ 履歴データ ───────────────────────────────────────────────────┐     │ │
│ │ │                                                                │     │ │
│ │ │ 記録する履歴の長さ: [1時間 ▼]                                 │     │ │
│ │ │                                                                │     │ │
│ │ │ グラフの解像度                                                 │     │ │
│ │ │ ◉ 高（メモリ使用: 約200MB）                                    │     │ │
│ │ │ ○ 中（メモリ使用: 約100MB）                                    │     │ │
│ │ │ ○ 低（メモリ使用: 約50MB）                                     │     │ │
│ │ │                                                                │     │ │
│ │ └────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                        │ │
│ │ ┌─ パフォーマンス ───────────────────────────────────────────────┐     │ │
│ │ │                                                                │     │ │
│ │ │ ☑ ハードウェアアクセラレーション使用                           │     │ │
│ │ │ ☑ バックグラウンドでの監視を最適化                             │     │ │
│ │ │ □ 詳細ログを記録（デバッグ用）                                 │     │ │
│ │ │                                                                │     │ │
│ │ └────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                        │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
```

#### 6.4.3 通知設定タブ

```
│ ┌─ 通知設定 ─────────────────────────────────────────────────────────────┐ │
│ │                                                                        │ │
│ │ ┌─ 通知方法 ─────────────────────────────────────────────────────┐     │ │
│ │ │                                                                │     │ │
│ │ │ ☑ デスクトップ通知                                             │     │ │
│ │ │ ☑ トーストメッセージ                                           │     │ │
│ │ │ ☑ システムトレイアイコン変化                                   │     │ │
│ │ │ □ 音声アラート                                                 │     │ │
│ │ │   └─ 音量: [▓▓▓▓▓░░░░░] 50%   [テスト]                        │     │ │
│ │ │ □ ブラウザソース連携                                           │     │ │
│ │ │                                                                │     │ │
│ │ └────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                        │ │
│ │ ┌─ 通知レベル ───────────────────────────────────────────────────┐     │ │
│ │ │                                                                │     │ │
│ │ │ 表示する通知レベル                                             │     │ │
│ │ │ ☑ Critical（緊急）                                             │     │ │
│ │ │ ☑ Warning（警告）                                              │     │ │
│ │ │ ☑ Info（情報）                                                 │     │ │
│ │ │ □ Tips（ヒント）                                               │     │ │
│ │ │                                                                │     │ │
│ │ └────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                        │ │
│ │ ┌─ 配信中モード ─────────────────────────────────────────────────┐     │ │
│ │ │                                                                │     │ │
│ │ │ 配信/録画中の通知表示                                          │     │ │
│ │ │ ◉ 控えめに表示（小さく、短時間）                               │     │ │
│ │ │ ○ 通常表示                                                     │     │ │
│ │ │ ○ 通知を無効化                                                 │     │ │
│ │ │                                                                │     │ │
│ │ │ 表示位置: [右下 ▼]                                             │     │ │
│ │ │ 透明度: [▓▓▓▓▓▓▓▓▓░] 90%                                      │     │ │
│ │ │                                                                │     │ │
│ │ └────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                        │ │
│ │ ┌─ 自動消去 ─────────────────────────────────────────────────────┐     │ │
│ │ │                                                                │     │ │
│ │ │ Critical: [30秒 ▼]                                             │     │ │
│ │ │ Warning:  [10秒 ▼]                                             │     │ │
│ │ │ Info:     [5秒 ▼]                                              │     │ │
│ │ │ Tips:     [15秒 ▼]                                             │     │ │
│ │ │                                                                │     │ │
│ │ │ □ アクションボタンがある場合は自動消去しない                   │     │ │
│ │ │                                                                │     │ │
│ │ └────────────────────────────────────────────────────────────────┘     │ │
│ │                                                                        │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
```

### 6.5 配置理由

**システムトレイ**
- 最小限の画面占有で常時監視
- 色で即座に状態把握（グランスレベル）
- コンテキストメニューで主要機能に素早くアクセス

**コンパクトビュー**
- 配信中の画面占有を最小化
- ドラッグで自由に移動可能
- 常に最前面表示オプション
- 必要に応じて詳細表示に展開

**通知トースト**
- 4段階の重要度で色分け
- アクションボタンで即座に対応
- 配信中モードで控えめ表示
- 自動消去で画面を邪魔しない

**設定画面のタブ構成**
- 機能ごとに整理されたタブ
- 各タブ内はカテゴリーでグループ化
- 「保存」と「適用」を分離
- 「デフォルトに戻す」で安全に試行可能

### 6.6 キーボード操作

**システムトレイ**
- Windowsキー+B: トレイアイコンにフォーカス
- Enter / Space: メニューを開く
- ↑ ↓: メニュー項目の移動
- Enter: 項目を実行

**コンパクトビュー**
- Ctrl+D: コンパクトビュー表示/非表示
- Ctrl+L: ロック/アンロック（位置固定）
- Ctrl+T: 常に最前面の切り替え
- Tab: ボタン間の移動

**通知トースト**
- Tab: アクションボタン間の移動
- Enter / Space: ボタンを実行
- Esc: 通知を閉じる
- Ctrl+Shift+N: 通知履歴を表示

**設定画面**
- Ctrl+Tab: 次のタブへ移動
- Ctrl+Shift+Tab: 前のタブへ移動
- Ctrl+S: 設定を保存
- Ctrl+R: デフォルトに戻す
- Esc: 設定画面を閉じる（保存確認）

### 6.7 アクセシビリティ注記

**トレイアイコンの説明**
```html
<button role="button"
        aria-label="OBS配信最適化ツール 状態: 良好"
        aria-describedby="tray-status">
  <img src="icon-green.png" alt="">
</button>
<div id="tray-status" hidden>
  配信時間: 1時間23分45秒
  CPU使用率: 62%
  問題: なし
</div>
```

**通知のARIA属性**
```html
<div role="alert"
     aria-live="assertive"
     aria-atomic="true"
     class="toast toast-critical">
  <h3>緊急: CPU過負荷</h3>
  <p>CPU使用率が90%を超えています</p>
  <button>詳細を見る</button>
  <button>最適化を実行</button>
</div>
```

**設定画面のランドマーク**
```html
<main aria-label="設定">
  <nav aria-label="設定カテゴリー">
    <button role="tab" aria-selected="true">一般</button>
    <button role="tab" aria-selected="false">監視</button>
    <!-- ... -->
  </nav>
  <div role="tabpanel" aria-labelledby="tab-general">
    <!-- 設定内容 -->
  </div>
</main>
```

**フォーカス管理**
- モーダル表示時は背景にフォーカスを移動させない
- モーダルを閉じたら元の位置にフォーカスを戻す
- トースト通知はフォーカスを奪わない（aria-live使用）
- エラー発生時は該当フィールドにフォーカス

**色覚多様性対応**
- トレイアイコンは色+形状で区別
- 通知は色+アイコンで区別
- グラフは色+パターンで区別
- すべてのコントラスト比 4.5:1以上

---

## まとめ

### 設計の一貫性

すべての画面・コンポーネントで以下の原則を徹底:

1. **3段階情報密度**
   - グランス: 色・アイコン（0.5秒）
   - 概要: カード・グラフ（3秒）
   - 詳細: ドリルダウン（必要時）

2. **配信中モード**
   - 最小限の画面占有
   - 控えめな通知
   - ワンクリック操作

3. **アクセシビリティ**
   - WCAG 2.1 AA準拠
   - キーボード完全操作
   - スクリーンリーダー対応
   - 色覚多様性配慮

### 技術実装への橋渡し

各ワイヤーフレームには以下を含めた:
- 具体的なレイアウト（Box drawing）
- UI要素の配置理由
- キーボード操作仕様
- アクセシビリティ実装例（HTML/ARIA）

これにより、開発チームが直接実装に移れる水準の仕様となっている。

### ユーザー体験の流れ

1. **初回起動**: オンボーディング（5分）
2. **日常使用**: システムトレイ + コンパクトビュー
3. **問題発生**: 通知トースト → ダッシュボード → 詳細
4. **振り返り**: レポート画面でセッション分析
5. **改善**: プロファイル調整 → 次回の配信へ

このサイクルで、継続的な配信品質向上を実現する。
